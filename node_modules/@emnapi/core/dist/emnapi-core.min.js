!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self).emnapiCore={})}(this,function(r){var e="undefined"!=typeof WebAssembly?WebAssembly:"undefined"!=typeof WXWebAssembly?WXWebAssembly:void 0;function t(r){if(r&&"object"!=typeof r)throw new TypeError("imports must be an object or undefined");return!0}function n(r,a){if(!r)throw new TypeError("Invalid wasm source");t(a),a=null!=a?a:{};try{var o="object"==typeof r&&null!==r&&"then"in r?r.then:void 0;if("function"==typeof o)return o.call(r,function(r){return n(r,a)})}catch(r){}if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))return e.instantiate(r,a);if(r instanceof e.Module)return e.instantiate(r,a).then(function(e){return{instance:e,module:r}});if("undefined"!=typeof Response&&r instanceof Response)return r.arrayBuffer().then(function(r){return e.instantiate(r,a)});var i="string"==typeof r;if(i||"undefined"!=typeof URL&&r instanceof URL){if(i&&"undefined"!=typeof wx&&"undefined"!=typeof __wxConfig)return e.instantiate(r,a);if("function"!=typeof fetch)throw new TypeError("wasm source can not be a string or URL in this environment");if("function"!=typeof e.instantiateStreaming)return n(fetch(r),a);try{return e.instantiateStreaming(fetch(r),a).catch(function(){return n(fetch(r),a)})}catch(e){return n(fetch(r),a)}}throw new TypeError("Invalid wasm source")}var a="undefined"!=typeof WebAssembly?WebAssembly:"undefined"!=typeof WXWebAssembly?WXWebAssembly:void 0,o="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node;function i(r){return"function"==typeof(null==r?void 0:r.postMessage)?r.postMessage:"function"==typeof postMessage?postMessage:void 0}function s(r){return"function"==typeof SharedArrayBuffer&&r instanceof SharedArrayBuffer||"[object SharedArrayBuffer]"===Object.prototype.toString.call(r)}function u(r){try{return r instanceof a.RuntimeError}catch(r){return!1}}function f(r,e){return{__emnapi__:{type:r,payload:e}}}function c(r){if(r){if(!s(r.buffer))throw new Error("Multithread features require shared wasm memory. Try to compile with `-matomics -mbulk-memory` and use `--import-memory --shared-memory` during linking, then create WebAssembly.Memory with `shared: true` option")}else if("undefined"==typeof SharedArrayBuffer)throw new Error("Current environment does not support SharedArrayBuffer, threads are not available!")}var l=0,d=function(){function r(r){var e;if(this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.wasmModule=null,this.wasmMemory=null,this.messageEvents=new WeakMap,!r)throw new TypeError("ThreadManager(): options is not provided");this._childThread="childThread"in r&&Boolean(r.childThread),this._childThread?(this._onCreateWorker=void 0,this._reuseWorker=!1,this._beforeLoad=void 0):(this._onCreateWorker=r.onCreateWorker,this._reuseWorker=function(r){var e;if("boolean"==typeof r)return!!r&&{size:0,strict:!1};if("number"==typeof r){if(!(r>=0))throw new RangeError("reuseWorker: size must be a non-negative integer");return{size:r,strict:!1}}if(!r)return!1;var t=null!==(e=Number(r.size))&&void 0!==e?e:0,n=Boolean(r.strict);if(!(t>0)&&n)throw new RangeError("reuseWorker: size must be set to positive integer if strict is set to true");return{size:t,strict:n}}(r.reuseWorker),this._beforeLoad=r.beforeLoad),this.printErr=null!==(e=r.printErr)&&void 0!==e?e:console.error.bind(console)}return Object.defineProperty(r.prototype,"nextWorkerID",{get:function(){return l},enumerable:!1,configurable:!0}),r.prototype.init=function(){this._childThread||this.initMainThread()},r.prototype.initMainThread=function(){this.preparePool()},r.prototype.preparePool=function(){if(this._reuseWorker&&this._reuseWorker.size)for(var r=this._reuseWorker.size;r--;){var e=this.allocateUnusedWorker();o&&(e.once("message",function(){}),e.unref())}},r.prototype.shouldPreloadWorkers=function(){return!this._childThread&&this._reuseWorker&&this._reuseWorker.size>0},r.prototype.loadWasmModuleToAllWorkers=function(){for(var r=this,e=Array(this.unusedWorkers.length),t=function(r){var t=n.unusedWorkers[r];o&&t.ref(),e[r]=n.loadWasmModuleToWorker(t).then(function(r){return o&&t.unref(),r},function(r){throw o&&t.unref(),r})},n=this,a=0;a<this.unusedWorkers.length;++a)t(a);return Promise.all(e).catch(function(e){throw r.terminateAllThreads(),e})},r.prototype.preloadWorkers=function(){return this.shouldPreloadWorkers()?this.loadWasmModuleToAllWorkers():Promise.resolve([])},r.prototype.setup=function(r,e){this.wasmModule=r,this.wasmMemory=e},r.prototype.markId=function(r){if(r.__emnapi_tid)return r.__emnapi_tid;var e=l+43;return l=(l+1)%536870869,this.pthreads[e]=r,r.__emnapi_tid=e,e},r.prototype.returnWorkerToPool=function(r){var e=r.__emnapi_tid;void 0!==e&&delete this.pthreads[e],this.unusedWorkers.push(r),this.runningWorkers.splice(this.runningWorkers.indexOf(r),1),delete r.__emnapi_tid,o&&r.unref()},r.prototype.loadWasmModuleToWorker=function(r,e){var t=this;if(r.whenLoaded)return r.whenLoaded;var n=this.printErr,a=this._beforeLoad,i=this;return r.whenLoaded=new Promise(function(s,u){r.onmessage=function(e){!function(e){if(e.__emnapi__){var n=e.__emnapi__.type,a=e.__emnapi__.payload;"loaded"===n?(r.loaded=!0,o&&!r.__emnapi_tid&&r.unref(),s(r)):"cleanup-thread"===n&&a.tid in t.pthreads&&t.cleanThread(r,a.tid)}}(e.data),t.fireMessageEvent(r,e)},r.onerror=function(e){var t="worker sent an error!";if(void 0!==r.__emnapi_tid&&(t="worker (tid = "+r.__emnapi_tid+") sent an error!"),"message"in e){if(n(t+" "+e.message),-1!==e.message.indexOf("RuntimeError")||-1!==e.message.indexOf("unreachable"))try{i.terminateAllThreads()}catch(r){}}else n(t);throw u(e),e},o&&(r.on("message",function(e){var t,n;null===(n=(t=r).onmessage)||void 0===n||n.call(t,{data:e})}),r.on("error",function(e){var t,n;null===(n=(t=r).onerror)||void 0===n||n.call(t,e)}),r.on("detachedExit",function(){})),"function"==typeof a&&a(r);try{r.postMessage(f("load",{wasmModule:t.wasmModule,wasmMemory:t.wasmMemory,sab:e}))}catch(r){throw c(t.wasmMemory),r}}),r.whenLoaded},r.prototype.allocateUnusedWorker=function(){var r=this._onCreateWorker;if("function"!=typeof r)throw new TypeError("`options.onCreateWorker` is not provided");var e=r({type:"thread",name:"emnapi-pthread"});return this.unusedWorkers.push(e),e},r.prototype.getNewWorker=function(r){if(this._reuseWorker){if(0===this.unusedWorkers.length){if(this._reuseWorker.strict)if(!o)return void(0,this.printErr)("Tried to spawn a new thread, but the thread pool is exhausted.\nThis might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.");var e=this.allocateUnusedWorker();this.loadWasmModuleToWorker(e,r)}return this.unusedWorkers.pop()}var t=this.allocateUnusedWorker();return this.loadWasmModuleToWorker(t,r),this.unusedWorkers.pop()},r.prototype.cleanThread=function(r,e,t){if(!t&&this._reuseWorker)this.returnWorkerToPool(r);else{delete this.pthreads[e];var n=this.runningWorkers.indexOf(r);-1!==n&&this.runningWorkers.splice(n,1),this.terminateWorker(r),delete r.__emnapi_tid}},r.prototype.terminateWorker=function(r){var e,t=this,n=r.__emnapi_tid;r.terminate(),null===(e=this.messageEvents.get(r))||void 0===e||e.clear(),this.messageEvents.delete(r),r.onmessage=function(r){r.data.__emnapi__&&(0,t.printErr)('received "'+r.data.__emnapi__.type+'" command from terminated worker: '+n)}},r.prototype.terminateAllThreads=function(){for(var r=0;r<this.runningWorkers.length;++r)this.terminateWorker(this.runningWorkers[r]);for(r=0;r<this.unusedWorkers.length;++r)this.terminateWorker(this.unusedWorkers[r]);this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.preparePool()},r.prototype.addMessageEventListener=function(r,e){var t=this.messageEvents.get(r);return t||(t=new Set,this.messageEvents.set(r,t)),t.add(e),function(){null==t||t.delete(e)}},r.prototype.fireMessageEvent=function(r,e){var t=this.messageEvents.get(r);if(t){var n=this.printErr;t.forEach(function(r){try{r(e)}catch(r){n(r.stack)}})}},r}(),p=Symbol("kIsProxy");function v(r,e){if(r[p])return r;var t=r.exports,n=function(r){for(var e=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],t={},n=function(n){var a=e[n];t[a]=function(){var e=Array.prototype.slice.call(arguments,1);return e.unshift(r),Reflect[a].apply(Reflect,e)}},a=0;a<e.length;a++)n(a);return t}(t),a=function(){},o=function(){return 0};n.get=function(r,n,i){var s;return"memory"===n?null!==(s="function"==typeof e?e():e)&&void 0!==s?s:Reflect.get(t,n,i):"_initialize"===n?n in t?a:void 0:"_start"===n?n in t?o:void 0:Reflect.get(t,n,i)},n.has=function(r,e){return"memory"===e||Reflect.has(t,e)};var i=new Proxy(Object.create(null),n);return new Proxy(r,{get:function(r,e,t){return"exports"===e?i:e===p||Reflect.get(r,e,t)}})}var h=new WeakMap,y=function(){function r(r){var e=this;if(!r)throw new TypeError("WASIThreads(): options is not provided");if(!r.wasi)throw new TypeError("WASIThreads(): options.wasi is not provided");h.set(this,new WeakSet);var t=r.wasi;!function(r,e){var t=h.get(r);if(t.has(e))return;var n=r,a=e.wasiImport;if(a){var o=a.proc_exit;a.proc_exit=function(r){return n.terminateAllThreads(),o.call(this,r)}}if(!n.childThread){var i=e.start;"function"==typeof i&&(e.start=function(r){try{return i.call(this,r)}catch(r){throw u(r)&&n.terminateAllThreads(),r}})}t.add(e)}(this,t),this.wasi=t,this.childThread="childThread"in r&&Boolean(r.childThread),this.PThread=void 0,"threadManager"in r?"function"==typeof r.threadManager?this.PThread=r.threadManager():this.PThread=r.threadManager:this.childThread||(this.PThread=new d(r),this.PThread.init());var n=!1;"waitThreadStart"in r&&(n="number"==typeof r.waitThreadStart?r.waitThreadStart:Boolean(r.waitThreadStart));var s=i(r);if(this.childThread&&"function"!=typeof s)throw new TypeError("options.postMessage is not a function");this.postMessage=s;var l=Boolean(r.wasm64),p=function(r){if(r.data.__emnapi__){var t=r.data.__emnapi__.type,n=r.data.__emnapi__.payload;"spawn-thread"===t?v(n.startArg,n.errorOrTid):"terminate-all-threads"===t&&e.terminateAllThreads()}},v=function(r,t){var i,u=void 0!==t;try{c(e.wasmMemory)}catch(r){if(null===(i=e.PThread)||void 0===i||i.printErr(r.stack),u){var d=new Int32Array(e.wasmMemory.buffer,t,2);return Atomics.store(d,0,1),Atomics.store(d,1,6),Atomics.notify(d,1),1}return-6}if(!u){var v=e.wasmInstance.exports.malloc;if(!(t=l?Number(v(BigInt(8))):v(8)))return-48}var h=e.wasmInstance.exports.free,y=l?function(r){h(BigInt(r))}:h,g=new Int32Array(e.wasmMemory.buffer,t,2);if(Atomics.store(g,0,0),Atomics.store(g,1,0),e.childThread){s(f("spawn-thread",{startArg:r,errorOrTid:t})),Atomics.wait(g,1,0);var _=Atomics.load(g,0),E=Atomics.load(g,1);return u?_:(y(t),_?-E:E)}var w,m,L,b=n||0===n;b&&(w=new Int32Array(new SharedArrayBuffer(8208)),Atomics.store(w,0,0));var S=e.PThread;try{if(!(m=S.getNewWorker(w)))throw new Error("failed to get new worker");if(S.addMessageEventListener(m,p),L=S.markId(m),o&&m.ref(),m.postMessage(f("start",{tid:L,arg:r,sab:w})),b){if("number"==typeof n){if("timed-out"===Atomics.wait(w,0,0,n)){try{S.cleanThread(m,L,!0)}catch(r){}throw new Error("Spawning thread timed out. Please check if the worker is created successfully and if message is handled properly in the worker.")}}else Atomics.wait(w,0,0);if(Atomics.load(w,0)>1){try{S.cleanThread(m,L,!0)}catch(r){}throw function(r){var e,t,n=new Int32Array(r);if(Atomics.load(n,0)<=1)return null;var o=Atomics.load(n,1),i=Atomics.load(n,2),s=Atomics.load(n,3),u=new Uint8Array(r),f=u.slice(16,16+o),c=u.slice(16+o,16+o+i),l=u.slice(16+o+i,16+o+i+s),d=(new TextDecoder).decode(f),p=(new TextDecoder).decode(c),v=(new TextDecoder).decode(l),h=new(null!==(e=globalThis[d])&&void 0!==e?e:"RuntimeError"===d&&null!==(t=a.RuntimeError)&&void 0!==t?t:Error)(p);return Object.defineProperty(h,"stack",{value:v,writable:!0,enumerable:!1,configurable:!0}),h}(w.buffer)}}}catch(r){return Atomics.store(g,0,1),Atomics.store(g,1,6),Atomics.notify(g,1),null==S||S.printErr(r.stack),u?1:(y(t),-6)}return Atomics.store(g,0,0),Atomics.store(g,1,L),Atomics.notify(g,1),S.runningWorkers.push(m),b||m.whenLoaded.catch(function(r){throw delete m.whenLoaded,S.cleanThread(m,L,!0),r}),u?0:(y(t),L)};this.threadSpawn=v}return r.prototype.getImportObject=function(){return{wasi:{"thread-spawn":this.threadSpawn}}},r.prototype.setup=function(r,e,t){null!=t||(t=r.exports.memory),this.wasmInstance=r,this.wasmMemory=t,this.PThread&&this.PThread.setup(e,t)},r.prototype.preloadWorkers=function(){return this.PThread?this.PThread.preloadWorkers():Promise.resolve([])},r.prototype.initialize=function(r,e,t){var n=r.exports;null!=t||(t=n.memory),this.childThread&&(r=v(r,t)),this.setup(r,e,t);var a=this.wasi;if("_start"in n&&"function"==typeof n._start)if(this.childThread){a.start(r);try{a[g(a,"kStarted")]=!1}catch(r){}}else!function(r,e){var t=g(r,["kInstance","kSetMemory"]),n=t[0],a=t[1];r[n]=e,r[a](e.exports.memory)}(a,r);else a.initialize(r);return r},r.prototype.start=function(r,e,t){var n=r.exports;return null!=t||(t=n.memory),this.childThread&&(r=v(r,t)),this.setup(r,e,t),{exitCode:this.wasi.start(r),instance:r}},r.prototype.terminateAllThreads=function(){var r;this.childThread?this.postMessage(f("terminate-all-threads",{})):null===(r=this.PThread)||void 0===r||r.terminateAllThreads()},r}();function g(r,e){var t=Object.getOwnPropertySymbols(r),n=function(r){return function(e){return e.description?e.description===r:e.toString()==="Symbol(".concat(r,")")}};return Array.isArray(e)?e.map(function(r){return t.filter(n(r))[0]}):t.filter(n(e))[0]}var _=function(){function r(r){var e=i(r);if("function"!=typeof e)throw new TypeError("options.postMessage is not a function");this.postMessage=e,this.onLoad=null==r?void 0:r.onLoad,this.onError="function"==typeof(null==r?void 0:r.onError)?r.onError:function(r,e){throw e},this.instance=void 0,this.messagesBeforeLoad=[]}return r.prototype.instantiate=function(r){if("function"==typeof this.onLoad)return this.onLoad(r);throw new Error("ThreadMessageHandler.prototype.instantiate is not implemented")},r.prototype.handle=function(r){var e,t=this;if(null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.__emnapi__){var n=r.data.__emnapi__.type,a=r.data.__emnapi__.payload;try{"load"===n?this._load(a):"start"===n&&this.handleAfterLoad(r,function(){t._start(a)})}catch(r){this.onError(r,n)}}},r.prototype._load=function(r){var e=this;if(void 0===this.instance){var t;try{t=this.instantiate(r)}catch(e){return void this._loaded(e,null,r)}var n=t&&"then"in t?t.then:void 0;"function"==typeof n?n.call(t,function(t){e._loaded(null,t,r)},function(t){e._loaded(t,null,r)}):this._loaded(null,t,r)}},r.prototype._start=function(r){var e=this.instance.exports.wasi_thread_start;if("function"!=typeof e){var t=new TypeError("wasi_thread_start is not exported");throw E(r.sab,2,t),t}var n=this.postMessage,a=r.tid,o=r.arg;E(r.sab,1);try{e(a,o)}catch(t){if("unwind"!==t)throw t;return}n(f("cleanup-thread",{tid:a}))},r.prototype._loaded=function(r,e,t){if(r)throw E(t.sab,2,r),r;if(null==e){var n=new TypeError("onLoad should return an object");throw E(t.sab,2,n),n}var a=e.instance;if(!a){var o=new TypeError('onLoad should return an object which includes "instance"');throw E(t.sab,2,o),o}this.instance=a,(0,this.postMessage)(f("loaded",{}));var i=this.messagesBeforeLoad;this.messagesBeforeLoad=[];for(var s=0;s<i.length;s++){var u=i[s];this.handle({data:u})}},r.prototype.handleAfterLoad=function(r,e){void 0!==this.instance?e.call(this,r):this.messagesBeforeLoad.push(r.data)},r}();function E(r,e,t){r&&(!function(r,e,t){var n=new Int32Array(r);if(Atomics.store(n,0,e),e>1&&t){var a=t.name,o=t.message,i=t.stack,s=(new TextEncoder).encode(a),u=(new TextEncoder).encode(o),f=(new TextEncoder).encode(i);Atomics.store(n,1,s.length),Atomics.store(n,2,u.length),Atomics.store(n,3,f.length);var c=new Uint8Array(r);c.set(s,16),c.set(u,16+s.length),c.set(f,16+s.length+u.length)}}(r.buffer,e,t),Atomics.notify(r,0))}function w(r){var t=function(){var t,n,a,o,i,s="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node,u=Boolean(r.childThread),f="number"==typeof r.waitThreadStart?r.waitThreadStart:Boolean(r.waitThreadStart);function c(r){if("function"==typeof e.RuntimeError)throw new e.RuntimeError(r);throw Error(r)}var l,p,v,h={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:u,initWorker:void 0,executeAsyncWork:void 0,waitThreadStart:f,PThread:void 0,init:function(r){if(h.loaded)return h.exports;if(!r)throw new TypeError("Invalid napi init options");var s=r.instance;if(!(null==s?void 0:s.exports))throw new TypeError("Invalid wasm instance");t=s;var u=s.exports,f=r.module,d=r.memory||u.memory,v=r.table||u.__indirect_function_table;if(!(f instanceof e.Module))throw new TypeError("Invalid wasm module");if(!(d instanceof e.Memory))throw new TypeError("Invalid wasm memory");if(!(v instanceof e.Table))throw new TypeError("Invalid wasm table");if(n=d,a=v,"function"!=typeof u.malloc)throw new TypeError("malloc is not exported");if("function"!=typeof u.free)throw new TypeError("free is not exported");if(o=u.malloc,i=u.free,!h.childThread){var y=8,g=s.exports.node_api_module_get_api_version_v1;"function"==typeof g&&(y=g());var _=h.envObject||(h.envObject=l.createEnv(h.filename,y,function(r){return a.get(r)},function(r){return a.get(r)},c,p)),E=l.openScope(_);try{_.callIntoModule(function(r){var e=h.exports,t=E.add(e),n=(0,s.exports.napi_register_wasm_v1)(r.id,t.id);h.exports=n?l.handleStore.get(n).value:e})}catch(r){if("unwind"!==r)throw r}finally{l.closeScope(_,E)}return h.loaded=!0,delete h.envObject,h.exports}}},y=void 0;if(u){l=null==r?void 0:r.context;var g="function"==typeof r.postMessage?r.postMessage:"function"==typeof postMessage?postMessage:void 0;if("function"!=typeof g)throw new TypeError("No postMessage found");h.postMessage=g}else{var _=r.context;if("object"!=typeof _||null===_)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");l=_}if("string"==typeof r.filename&&(h.filename=r.filename),"function"==typeof r.onCreateWorker&&(y=r.onCreateWorker),"function"==typeof r.print?r.print:console.log.bind(console),v="function"==typeof r.printErr?r.printErr:console.warn.bind(console),"nodeBinding"in r){var E=r.nodeBinding;if("object"!=typeof E||null===E)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");p=E}var w=0;if("asyncWorkPoolSize"in r){if("number"!=typeof r.asyncWorkPoolSize)throw new TypeError("options.asyncWorkPoolSize must be a integer");(w=r.asyncWorkPoolSize|0)>1024?w=1024:w<-1024&&(w=-1024)}var m=!u&&w<=0;function L(){return Math.abs(w)}function b(r){if(!r)return!1;if(r._emnapiSendListener)return!0;var e=function(r){var e=(s?r:r.data).__emnapi__;if(e&&"async-send"===e.type)if(u){(0,h.postMessage)({__emnapi__:e})}else{var t=e.payload.callback;a.get(t)(e.payload.data)}};return r._emnapiSendListener={handler:e,dispose:function(){s?r.off("message",e):r.removeEventListener("message",e,!1),delete r._emnapiSendListener}},s?r.on("message",e):r.addEventListener("message",e,!1),!0}h.imports.env._emnapi_async_work_pool_size=L,h.emnapi.addSendListener=b;var S=new d(u?{printErr:v,childThread:!0}:{printErr:v,beforeLoad:function(r){b(r)},reuseWorker:r.reuseWorker,onCreateWorker:y});function A(r,e){l.feature.setImmediate(function(){a.get(r)(e)})}function C(r,e){Promise.resolve().then(function(){a.get(r)(e)})}function k(r,e){var t,a=[e>>>0,(t=e,+Math.abs(t)>=1?t>0?(0|Math.min(+Math.floor(t/4294967296),4294967295))>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],o=new DataView(n.buffer);o.setInt32(r,a[0],!0),o.setInt32(r+4,a[1],!0)}h.PThread=S;var I,T=Object.freeze({__proto__:null,$emnapiSetValueI64:k,_emnapi_call_finalizer:function(r,e,t,n,a){l.envStore.get(e).callFinalizerInternal(r,t,n,a)},_emnapi_callback_into_module:function(r,e,t,n,o){var i=l.envStore.get(e),s=l.openScope(i);try{i.callbackIntoModule(Boolean(r),function(){a.get(t)(e,n)})}catch(r){throw l.closeScope(i,s),o&&l.closeScope(i),r}l.closeScope(i,s)},_emnapi_close_handle_scope:function(r){return l.closeScope()},_emnapi_ctx_decrease_waiting_request_counter:function(){l.decreaseWaitingRequestCounter()},_emnapi_ctx_increase_waiting_request_counter:function(){l.increaseWaitingRequestCounter()},_emnapi_get_node_version:function(r,e,t){var a="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node?process.versions.node.split(".").map(function(r){return Number(r)}):[0,0,0],o=new DataView(n.buffer);o.setUint32(r,a[0],!0),o.setUint32(e,a[1],!0),o.setUint32(t,a[2],!0)},_emnapi_get_now:function(){return performance.timeOrigin+performance.now()},_emnapi_is_main_browser_thread:function(){return"undefined"==typeof window||"undefined"==typeof document||s?0:1},_emnapi_is_main_runtime_thread:function(){return u?0:1},_emnapi_next_tick:C,_emnapi_open_handle_scope:function(){return l.openScope().id},_emnapi_runtime_keepalive_pop:function(){},_emnapi_runtime_keepalive_push:function(){},_emnapi_set_immediate:A,_emnapi_unwind:function(){throw"unwind"},napi_clear_last_error:function(r){return l.envStore.get(r).clearLastError()},napi_set_last_error:function(r,e,t,n){return l.envStore.get(r).setLastError(e,t,n)}});function V(r){var e=new DataView(n.buffer).getInt32(r+20,!0);return S.pthreads[e]}var U=new Promise(function(r){I=function(){U.ready=!0,r()}});U.ready=!1;var B=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:function(r,e,t){U.ready?a.get(r)(e,t):U.then(function(){a.get(r)(e,t)})},_emnapi_async_send_js:function(r,e,t){if(u)(0,h.postMessage)({__emnapi__:{type:"async-send",payload:{callback:e,data:t}}});else switch(r){case 0:A(e,t);break;case 1:C(e,t)}},_emnapi_emit_async_thread_ready:function(){u&&(0,h.postMessage)({__emnapi__:{type:"async-thread-ready",payload:{}}})},_emnapi_tell_js_uvthreadpool:function(r,e){for(var t=[],a=new DataView(n.buffer),o=function(e){var n=V(a.getUint32(r+4*e,!0));t.push(new Promise(function(r){var e=function(t){var a=(s?t:t.data).__emnapi__;a&&"async-thread-ready"===a.type&&(r(),n&&"function"==typeof n.unref&&n.unref(),s?n.off("message",e):n.removeEventListener("message",e))};s?n.on("message",e):n.addEventListener("message",e)}))},i=0;i<e;i++)o(i);Promise.all(t).then(I)},_emnapi_worker_unref:function(r){if(!u){var e=V(r);e&&"function"==typeof e.unref&&e.unref()}}});var D=Object.freeze({__proto__:null,napi_adjust_external_memory:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(!t)return a.setLastError(1);var o=Number(e);if(o<0)return a.setLastError(1);var i=n.buffer.byteLength,s=i+o;return s+=(65536-s%65536)%65536,-1===n.grow(s-i+65535>>16)?a.setLastError(9):(l.feature.supportBigInt?new DataView(n.buffer).setBigInt64(t,BigInt(n.buffer.byteLength),!0):k(t,n.buffer.byteLength),a.clearLastError())}}),x={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var r={nextId:1,list:[],generate:function(){var e;return r.list.length?e=r.list.shift():(e=r.nextId,r.nextId++),e},reuse:function(e){r.list.push(e)}};x.idGen=r,x.values=[void 0],x.queued=new Set,x.pending=[]},create:function(r,e,t,n,a,o){var i=0,s=0;if(p){var u=p.node.emitAsyncInit(e,t,-1);i=u.asyncId,s=u.triggerAsyncId}var f=x.idGen.generate();return x.values[f]={env:r,id:f,resource:e,asyncId:i,triggerAsyncId:s,status:0,execute:n,complete:a,data:o},f},callComplete:function(r,e){var t=r.complete,n=r.env,o=r.data,i=function(){if(t){var r=l.envStore.get(n),i=l.openScope(r);try{r.callbackIntoModule(!0,function(){a.get(t)(n,e,o)})}finally{l.closeScope(r,i)}}};p?p.node.makeCallback(r.resource,i,[],{asyncId:r.asyncId,triggerAsyncId:r.triggerAsyncId}):i()},queue:function(r){var e=x.values[r];if(e&&0===e.status){if(e.status=1,x.queued.size>=(Math.abs(w)||4))return void x.pending.push(r);x.queued.add(r);var t=e.env,n=e.data,o=e.execute;e.status=2,l.feature.setImmediate(function(){if(a.get(o)(t,n),x.queued.delete(r),e.status=3,l.feature.setImmediate(function(){x.callComplete(e,0)}),x.pending.length>0){var i=x.pending.shift();x.values[i].status=0,x.queue(i)}})}},cancel:function(r){var e=x.pending.indexOf(r);if(-1!==e){var t=x.values[r];return t&&1===t.status?(t.status=4,x.pending.splice(e,1),l.feature.setImmediate(function(){x.callComplete(t,11)}),0):9}return 9},remove:function(r){var e=x.values[r];e&&(p&&p.node.emitAsyncDestroy({asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}),x.values[r]=void 0,x.idGen.reuse(r))}};function M(r,e,t,a){if(p){var o=l.handleStore.get(r).value,i=l.handleStore.get(e).value,s=p.node.emitAsyncInit(o,i,t),u=s.asyncId,f=s.triggerAsyncId;if(a){var c=new DataView(n.buffer);c.setFloat64(a,u,!0),c.setFloat64(a+8,f,!0)}}}function W(r,e){p&&p.node.emitAsyncDestroy({asyncId:r,triggerAsyncId:e})}var j=Object.freeze({__proto__:null,_emnapi_async_destroy_js:function(r){if(!p)return 9;var e=new DataView(n.buffer),t=e.getInt32(r,!0),a=e.getInt32(r+4,!0),o=BigInt(t>>>0)|BigInt(a)<<BigInt(32),i=p.napi.asyncDestroy(o);return 0!==i.status?i.status:0},_emnapi_async_init_js:function(r,e,t){if(!p)return 9;var a;r&&(a=Object(l.handleStore.get(r).value));var o=l.handleStore.get(e).value,i=p.napi.asyncInit(a,o);if(0!==i.status)return i.status;var s=i.value;s>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&s<BigInt(1)<<BigInt(63)||(s&=(BigInt(1)<<BigInt(64))-BigInt(1))>=BigInt(1)<<BigInt(63)&&(s-=BigInt(1)<<BigInt(64));var u=Number(s&BigInt(4294967295)),f=Number(s>>BigInt(32)),c=new DataView(n.buffer);return c.setInt32(t,u,!0),c.setInt32(t+4,f,!0),0},_emnapi_env_check_gc_access:function(r){l.envStore.get(r).checkGCAccess()},_emnapi_node_emit_async_destroy:W,_emnapi_node_emit_async_init:M,_emnapi_node_make_callback:function(r,e,t,a,o,i,s,u){var f,c=0;if(p){var d=l.handleStore.get(e).value,v=l.handleStore.get(t).value;o>>>=0;for(var h=Array(o),y=new DataView(n.buffer);c<o;c++){var g=y.getUint32(a+4*c,!0);h[c]=l.handleStore.get(g).value}var _=p.node.makeCallback(d,v,h,{asyncId:i,triggerAsyncId:s});if(u)f=l.envStore.get(r).ensureHandleId(_),y.setUint32(u,f,!0)}},napi_close_callback_scope:function(r,e){throw new Error("napi_close_callback_scope has not been implemented yet")},napi_make_callback:function(r,e,t,a,o,i,s){var u,f=0;if(!r)return 1;var c=l.envStore.get(r);if(c.checkGCAccess(),!c.tryCatch.isEmpty())return c.setLastError(10);if(!c.canCallIntoJs())return c.setLastError(c.moduleApiVersion>=10?23:10);c.clearLastError();try{if(!p)return c.setLastError(9);if(!t)return c.setLastError(1);if(o>0&&!i)return c.setLastError(1);var d=Object(l.handleStore.get(t).value),v=l.handleStore.get(a).value;if("function"!=typeof v)return c.setLastError(1);var h=new DataView(n.buffer),y=h.getInt32(e,!0),g=h.getInt32(e+4,!0),_=BigInt(y>>>0)|BigInt(g)<<BigInt(32);o>>>=0;for(var E=Array(o);f<o;f++){var w=h.getUint32(i+4*f,!0);E[f]=l.handleStore.get(w).value}var m=p.napi.makeCallback(_,d,v,E);if(m.error)throw m.error;return 0!==m.status?c.setLastError(m.status):(s&&(u=c.ensureHandleId(m.value),h.setUint32(s,u,!0)),c.getReturnStatus())}catch(r){return c.tryCatch.setError(r),c.setLastError(10)}},napi_open_callback_scope:function(r,e,t,n){throw new Error("napi_open_callback_scope has not been implemented yet")}}),O={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(void 0!==S){S.unusedWorkers.forEach(O.addListener),S.runningWorkers.forEach(O.addListener);var r=S.getNewWorker;S.getNewWorker=function(){var e=r.apply(this,arguments);return O.addListener(e),e}}},addListener:function(r){if(!r)return!1;if(r._emnapiTSFNListener)return!0;var e=function(r){var e=(s?r:r.data).__emnapi__;if(e){var t=e.type,n=e.payload;"tsfn-send"===t&&O.dispatch(n.tsfn)}};return r._emnapiTSFNListener={handler:e,dispose:function(){s?r.off("message",e):r.removeEventListener("message",e,!1),delete r._emnapiTSFNListener}},s?r.on("message",e):r.addEventListener("message",e,!1),!0},initQueue:function(r){var e=o(8);return!!e&&(new Uint8Array(n.buffer,e,8).fill(0),O.storeSizeTypeValue(r+O.offset.queue,e,!1),!0)},destroyQueue:function(r){var e=O.loadSizeTypeValue(r+O.offset.queue,!1);e&&i(e)},pushQueue:function(r,e){var t=O.loadSizeTypeValue(r+O.offset.queue,!1),n=O.loadSizeTypeValue(t,!1),a=O.loadSizeTypeValue(t+4,!1),i=o(8);if(!i)throw new Error("OOM");O.storeSizeTypeValue(i,e,!1),O.storeSizeTypeValue(i+4,0,!1),0===n&&0===a?(O.storeSizeTypeValue(t,i,!1),O.storeSizeTypeValue(t+4,i,!1)):(O.storeSizeTypeValue(a+4,i,!1),O.storeSizeTypeValue(t+4,i,!1)),O.addQueueSize(r)},shiftQueue:function(r){var e=O.loadSizeTypeValue(r+O.offset.queue,!1),t=O.loadSizeTypeValue(e,!1);if(0===t)return 0;var n=t,a=O.loadSizeTypeValue(t+4,!1);O.storeSizeTypeValue(e,a,!1),0===a&&O.storeSizeTypeValue(e+4,0,!1),O.storeSizeTypeValue(n+4,0,!1);var o=O.loadSizeTypeValue(n,!1);return i(n),O.subQueueSize(r),o},push:function(r,e,t){var n=O.getMutex(r),a=O.getCond(r),o=function(){var e=O.getQueueSize(r),t=O.getMaxQueueSize(r),n=O.getIsClosing(r);return e>=t&&t>0&&!n},i="undefined"!=typeof window&&"undefined"!=typeof document&&!s;return n.execute(function(){for(;o();){if(0===t)return 15;if(i)return 21;a.wait()}return O.getIsClosing(r)?0===O.getThreadCount(r)?1:(O.subThreadCount(r),16):(O.pushQueue(r,e),O.send(r),0)})},getMutex:function(r){var e=r+O.offset.mutex,t={lock:function(){var r="undefined"!=typeof window&&"undefined"!=typeof document&&!s,t=new Int32Array(n.buffer,e,1);if(r)for(;;){if(0===Atomics.compareExchange(t,0,0,1))return}else for(;;){if(0===Atomics.compareExchange(t,0,0,1))return;Atomics.wait(t,0,1)}},unlock:function(){var r=new Int32Array(n.buffer,e,1);if(1!==Atomics.compareExchange(r,0,1,0))throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(r,0,1)},execute:function(r){t.lock();try{return r()}finally{t.unlock()}}};return t},getCond:function(r){var e=r+O.offset.cond,t=O.getMutex(r);return{wait:function(){var r=new Int32Array(n.buffer,e,1),a=Atomics.load(r,0);t.unlock(),Atomics.wait(r,0,a),t.lock()},signal:function(){var r=new Int32Array(n.buffer,e,1);Atomics.add(r,0,1),Atomics.notify(r,0,1)}}},getQueueSize:function(r){return O.loadSizeTypeValue(r+O.offset.queue_size,!0)},addQueueSize:function(r){var e,t,a=O.offset.queue_size;e=new Uint32Array(n.buffer),t=r+a>>2,Atomics.add(e,t,1)},subQueueSize:function(r){var e,t,a=O.offset.queue_size;e=new Uint32Array(n.buffer),t=r+a>>2,Atomics.sub(e,t,1)},getThreadCount:function(r){return O.loadSizeTypeValue(r+O.offset.thread_count,!0)},addThreadCount:function(r){var e,t,a=O.offset.thread_count;e=new Uint32Array(n.buffer),t=r+a>>2,Atomics.add(e,t,1)},subThreadCount:function(r){var e,t,a=O.offset.thread_count;e=new Uint32Array(n.buffer),t=r+a>>2,Atomics.sub(e,t,1)},getIsClosing:function(r){return Atomics.load(new Int32Array(n.buffer),r+O.offset.is_closing>>2)},setIsClosing:function(r,e){Atomics.store(new Int32Array(n.buffer),r+O.offset.is_closing>>2,e)},getHandlesClosing:function(r){return Atomics.load(new Int32Array(n.buffer),r+O.offset.handles_closing>>2)},setHandlesClosing:function(r,e){Atomics.store(new Int32Array(n.buffer),r+O.offset.handles_closing>>2,e)},getDispatchState:function(r){return Atomics.load(new Uint32Array(n.buffer),r+O.offset.dispatch_state>>2)},getContext:function(r){return O.loadSizeTypeValue(r+O.offset.context,!1)},getMaxQueueSize:function(r){return O.loadSizeTypeValue(r+O.offset.max_queue_size,!0)},getEnv:function(r){return O.loadSizeTypeValue(r+O.offset.env,!1)},getCallJSCb:function(r){return O.loadSizeTypeValue(r+O.offset.call_js_cb,!1)},getRef:function(r){return O.loadSizeTypeValue(r+O.offset.ref,!1)},getResource:function(r){return O.loadSizeTypeValue(r+O.offset.resource,!1)},getFinalizeCb:function(r){return O.loadSizeTypeValue(r+O.offset.finalize_cb,!1)},getFinalizeData:function(r){return O.loadSizeTypeValue(r+O.offset.finalize_data,!1)},loadSizeTypeValue:function(r,e){var t;return e?(t=new Uint32Array(n.buffer),Atomics.load(t,r>>2)):(t=new Int32Array(n.buffer),Atomics.load(t,r>>2))},storeSizeTypeValue:function(r,e,t){var a;return t?(a=new Uint32Array(n.buffer),void Atomics.store(a,r>>2,e)):(a=new Int32Array(n.buffer),void Atomics.store(a,r>>2,e>>>0))},destroy:function(r){O.destroyQueue(r);var e=O.getEnv(r),t=l.envStore.get(e),a=O.getRef(r);a&&l.refStore.get(a).dispose(),l.removeCleanupHook(t,O.cleanup,r),t.unref();var o=r+O.offset.async_ref>>2,s=new Int32Array(n.buffer);Atomics.load(s,o)&&(Atomics.store(s,o,0),l.decreaseWaitingRequestCounter());var u=O.getResource(r);if(l.refStore.get(u).dispose(),p){var f=new DataView(n.buffer);W(f.getFloat64(r+O.offset.async_id,!0),f.getFloat64(r+O.offset.trigger_async_id,!0))}i(r)},emptyQueueAndDelete:function(r){for(var e,t=O.getCallJSCb(r),n=O.getContext(r);O.getQueueSize(r)>0;)e=O.shiftQueue(r),t&&a.get(t)(0,0,n,e);O.destroy(r)},finalize:function(r){var e=O.getEnv(r),t=l.envStore.get(e);l.openScope(t);var a=O.getFinalizeCb(r),o=O.getFinalizeData(r),i=O.getContext(r),s=function(){t.callFinalizerInternal(0,a,o,i)};try{if(a)if(p){var u=O.getResource(r),f=l.refStore.get(u).get(),c=l.handleStore.get(f).value,d=new DataView(n.buffer),v=d.getFloat64(r+O.offset.async_id,!0),h=d.getFloat64(r+O.offset.trigger_async_id,!0);p.node.makeCallback(c,s,[],{asyncId:v,triggerAsyncId:h})}else s();O.emptyQueueAndDelete(r)}finally{l.closeScope(t)}},cleanup:function(r){O.closeHandlesAndMaybeDelete(r,1)},closeHandlesAndMaybeDelete:function(r,e){var t=O.getEnv(r),n=l.envStore.get(t);l.openScope(n);try{if(e&&O.getMutex(r).execute(function(){O.setIsClosing(r,1),O.getMaxQueueSize(r)>0&&O.getCond(r).signal()}),O.getHandlesClosing(r))return;O.setHandlesClosing(r,1),l.feature.setImmediate(function(){O.finalize(r)})}finally{l.closeScope(n)}},dispatchOne:function(r){var e=0,t=!1,o=!1,i=O.getMutex(r),s=O.getCond(r);if(i.execute(function(){if(O.getIsClosing(r))O.closeHandlesAndMaybeDelete(r,0);else{var n=O.getQueueSize(r);if(n>0){e=O.shiftQueue(r),t=!0;var a=O.getMaxQueueSize(r);n===a&&a>0&&s.signal(),n--}0===n?0===O.getThreadCount(r)&&(O.setIsClosing(r,1),O.getMaxQueueSize(r)>0&&s.signal(),O.closeHandlesAndMaybeDelete(r,0)):o=!0}}),t){var u=O.getEnv(r),f=l.envStore.get(u);l.openScope(f);var c=function(){f.callbackIntoModule(!1,function(){var t=O.getCallJSCb(r),n=O.getRef(r),o=n?l.refStore.get(n).get():0;if(t){var i=O.getContext(r);a.get(t)(u,o,i,e)}else{var s=o?l.handleStore.get(o).value:null;"function"==typeof s&&s()}})};try{if(p){var d=O.getResource(r),v=l.refStore.get(d).get(),h=l.handleStore.get(v).value,y=new DataView(n.buffer);p.node.makeCallback(h,c,[],{asyncId:y.getFloat64(r+O.offset.async_id,!0),triggerAsyncId:y.getFloat64(r+O.offset.trigger_async_id,!0)})}else c()}finally{l.closeScope(f)}}return o},dispatch:function(r){for(var e=!0,t=1e3,a=new Uint32Array(n.buffer),o=r+O.offset.dispatch_state>>2;e&&0!==--t;)Atomics.store(a,o,1),e=O.dispatchOne(r),1!==Atomics.exchange(a,o,0)&&(e=!0);e&&O.send(r)},send:function(r){1&~Atomics.or(new Uint32Array(n.buffer),r+O.offset.dispatch_state>>2,2)&&(void 0!==u&&u?postMessage({__emnapi__:{type:"tsfn-send",payload:{tsfn:r}}}):l.feature.setImmediate(function(){O.dispatch(r)}))}};var R={unusedWorkers:[],runningWorkers:[],workQueue:[],workerReady:null,offset:{resource:0,async_id:8,trigger_async_id:16,env:24,data:28,execute:32,complete:36,end:40},init:function(){R.unusedWorkers=[],R.runningWorkers=[],R.workQueue=[],R.workerReady=null},addListener:function(r){if(!r)return!1;if(r._emnapiAWMTListener)return!0;var e=function(e){var t=(s?e:e.data).__emnapi__;if(t){var n=t.type,a=t.payload;"async-work-complete"===n?(l.decreaseWaitingRequestCounter(),R.runningWorkers.splice(R.runningWorkers.indexOf(r),1),R.unusedWorkers.push(r),R.checkIdleWorker(),R.callComplete(a.work,0)):"async-work-queue"===n?R.scheduleWork(a.work):"async-work-cancel"===n&&R.cancelWork(a.work)}};return r._emnapiAWMTListener={handler:e,dispose:function(){s?r.off("message",e):r.removeEventListener("message",e,!1),delete r._emnapiAWMTListener}},s?r.on("message",e):r.addEventListener("message",e,!1),!0},initWorkers:function(r){if(u)return R.workerReady||(R.workerReady=Promise.resolve());if(R.workerReady)return R.workerReady;if("function"!=typeof y)throw new TypeError("`options.onCreateWorker` is not a function");var e=[],n=[];if(!("emnapi_async_worker_create"in t.exports))throw new TypeError("`emnapi_async_worker_create` is not exported, please try to add `--export=emnapi_async_worker_create` to linker flags");for(var a=0;a<r;++a)n.push(t.exports.emnapi_async_worker_create());try{var o=function(r){var t=y({type:"async-work",name:"emnapi-async-worker"}),a=S.loadWasmModuleToWorker(t);R.addListener(t),e.push(a.then(function(){"function"==typeof t.unref&&t.unref()})),R.unusedWorkers.push(t);var o=n[r];t.threadBlockBase=o,t.postMessage({__emnapi__:{type:"async-worker-init",payload:{arg:o}}})};for(a=0;a<r;++a)o(a)}catch(e){for(a=0;a<r;++a){var s=n[a];i(s)}throw e}return R.workerReady=Promise.all(e),R.workerReady},checkIdleWorker:function(){if(R.unusedWorkers.length>0&&R.workQueue.length>0){var r=R.unusedWorkers.shift(),e=R.workQueue.shift();R.runningWorkers.push(r),r.postMessage({__emnapi__:{type:"async-work-execute",payload:{work:e}}})}},getResource:function(r){return O.loadSizeTypeValue(r+R.offset.resource,!1)},getExecute:function(r){return O.loadSizeTypeValue(r+R.offset.execute,!1)},getComplete:function(r){return O.loadSizeTypeValue(r+R.offset.complete,!1)},getEnv:function(r){return O.loadSizeTypeValue(r+R.offset.env,!1)},getData:function(r){return O.loadSizeTypeValue(r+R.offset.data,!1)},scheduleWork:function(r){var e;if(u)(0,h.postMessage)({__emnapi__:{type:"async-work-queue",payload:{work:r}}});else if(l.increaseWaitingRequestCounter(),R.workQueue.push(r),null===(e=R.workerReady)||void 0===e?void 0:e.ready)R.checkIdleWorker();else{var t=function(r){throw l.decreaseWaitingRequestCounter(),r};try{R.initWorkers(L()).then(function(){R.workerReady.ready=!0,R.checkIdleWorker()},t)}catch(r){t(r)}}},cancelWork:function(r){if(u)return(0,h.postMessage)({__emnapi__:{type:"async-work-cancel",payload:{work:r}}}),0;var e=R.workQueue.indexOf(r);return-1!==e?(R.workQueue.splice(e,1),l.feature.setImmediate(function(){l.decreaseWaitingRequestCounter(),R.checkIdleWorker(),R.callComplete(r,11)}),0):9},callComplete:function(r,e){var t=R.getComplete(r),o=R.getEnv(r),i=R.getData(r),s=l.envStore.get(o),u=l.openScope(s),f=function(){t&&s.callbackIntoModule(!0,function(){a.get(t)(o,e,i)})};try{if(p){var c=R.getResource(r),d=l.refStore.get(c).get(),v=l.handleStore.get(d).value,h=new DataView(n.buffer),y=h.getFloat64(r+R.offset.async_id,!0),g=h.getFloat64(r+R.offset.trigger_async_id,!0);p.node.makeCallback(v,f,[],{asyncId:y,triggerAsyncId:g})}else f()}finally{l.closeScope(s,u)}}},z=m?function(r,e,t,a,o,i,s){if(!r)return 1;var u,f=l.envStore.get(r);if(f.checkGCAccess(),!a)return f.setLastError(1);if(!s)return f.setLastError(1);if(u=e?Object(l.handleStore.get(e).value):{},!t)return f.setLastError(1);var c=String(l.handleStore.get(t).value),d=x.create(r,u,c,a,o,i);return new DataView(n.buffer).setUint32(s,d,!0),f.clearLastError()}:function(r,e,t,a,i,s,u){if(!r)return 1;var f,c=l.envStore.get(r);if(c.checkGCAccess(),!a)return c.setLastError(1);if(!u)return c.setLastError(1);if(f=e?Object(l.handleStore.get(e).value):{},!t)return c.setLastError(1);var d=R.offset.end,p=o(d);if(!p)return c.setLastError(9);new Uint8Array(n.buffer).subarray(p,p+d).fill(0);var v=c.ensureHandleId(f),h=l.createReference(c,v,1,1).id,y=new DataView(n.buffer);return y.setUint32(p,h,!0),M(v,t,-1,p+R.offset.async_id),y.setUint32(p+R.offset.env,r,!0),y.setUint32(p+R.offset.execute,a,!0),y.setUint32(p+R.offset.complete,i,!0),y.setUint32(p+R.offset.data,s,!0),y.setUint32(u,p,!0),c.clearLastError()},G=m?function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?(x.remove(e),t.clearLastError()):t.setLastError(1)}:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=R.getResource(e);if(l.refStore.get(a).dispose(),p){var o=new DataView(n.buffer);W(o.getFloat64(e+R.offset.async_id,!0),o.getFloat64(e+R.offset.trigger_async_id,!0))}return i(e),t.clearLastError()},F=m?function(r,e){if(!r)return 1;var t=l.envStore.get(r);return e?(x.queue(e),t.clearLastError()):t.setLastError(1)}:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return e?(R.scheduleWork(e),t.clearLastError()):t.setLastError(1)},P=m?function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(!e)return t.setLastError(1);var n=x.cancel(e);return 0===n?t.clearLastError():t.setLastError(n)}:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(!e)return t.setLastError(1);var n=R.cancelWork(e);return 0===n?t.clearLastError():t.setLastError(n)};h.initWorker=function(r){if(!h.childThread)throw new Error("startThread is only available in child threads");if("function"!=typeof t.exports.emnapi_async_worker_init)throw new TypeError("`emnapi_async_worker_init` is not exported, please try to add `--export=emnapi_async_worker_init` to linker flags");t.exports.emnapi_async_worker_init(r)},h.executeAsyncWork=function(r){if(u){var e=R.getExecute(r),t=R.getEnv(r),n=R.getData(r);a.get(e)(t,n),(0,h.postMessage)({__emnapi__:{type:"async-work-complete",payload:{work:r}}})}};var N=Object.freeze({__proto__:null,napi_cancel_async_work:P,napi_create_async_work:z,napi_delete_async_work:G,napi_queue_async_work:F}),J={registry:"function"==typeof FinalizationRegistry?new FinalizationRegistry(function(r){i(r)}):void 0,table:new WeakMap,wasmMemoryViewTable:new WeakMap,init:function(){J.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry(function(r){i(r)}):void 0,J.table=new WeakMap,J.wasmMemoryViewTable=new WeakMap},isSharedArrayBuffer:function(r){return"function"==typeof SharedArrayBuffer&&r instanceof SharedArrayBuffer||"[object SharedArrayBuffer]"===Object.prototype.toString.call(r)},isDetachedArrayBuffer:function(r){if(0===r.byteLength)try{new Uint8Array(r)}catch(r){return!0}return!1},getArrayBufferPointer:function(r,e){var t,a={address:0,ownership:0,runtimeAllocated:0};if(r===n.buffer)return a;var i=J.isDetachedArrayBuffer(r);if(J.table.has(r)){var s=J.table.get(r);return i?(s.address=0,s):(e&&0===s.ownership&&1===s.runtimeAllocated&&new Uint8Array(n.buffer).set(new Uint8Array(r),s.address),s)}if(i||0===r.byteLength)return a;if(!e)return a;var u=o(r.byteLength);if(!u)throw new Error("Out of memory");return new Uint8Array(n.buffer).set(new Uint8Array(r),u),a.address=u,a.ownership=J.registry?0:1,a.runtimeAllocated=1,J.table.set(r,a),null===(t=J.registry)||void 0===t||t.register(r,u),a},getOrUpdateMemoryView:function(r){if(r.buffer===n.buffer)return J.wasmMemoryViewTable.has(r)||J.wasmMemoryViewTable.set(r,{Ctor:r.constructor,address:r.byteOffset,length:r instanceof DataView?r.byteLength:r.length,ownership:1,runtimeAllocated:0}),r;if((J.isDetachedArrayBuffer(r.buffer)||"function"==typeof SharedArrayBuffer&&r.buffer instanceof SharedArrayBuffer)&&J.wasmMemoryViewTable.has(r)){var e=J.wasmMemoryViewTable.get(r),t=e.Ctor,a=void 0,o=l.feature.Buffer;return a="function"==typeof o&&t===o?o.from(n.buffer,e.address,e.length):new t(n.buffer,e.address,e.length),J.wasmMemoryViewTable.set(a,e),a}return r},getViewPointer:function(r,e){if((r=J.getOrUpdateMemoryView(r)).buffer===n.buffer){if(J.wasmMemoryViewTable.has(r)){var t=J.wasmMemoryViewTable.get(r);return{address:t.address,ownership:t.ownership,runtimeAllocated:t.runtimeAllocated,view:r}}return{address:r.byteOffset,ownership:1,runtimeAllocated:0,view:r}}var a=J.getArrayBufferPointer(r.buffer,e),o=a.address,i=a.ownership,s=a.runtimeAllocated;return{address:0===o?0:o+r.byteOffset,ownership:i,runtimeAllocated:s,view:r}}},q={utf8Decoder:void 0,utf16Decoder:void 0,init:function(){var r,e={decode:function(r){for(var e=0,t=Math.min(4096,r.length+1),n=new Uint16Array(t),a=[],o=0;;){var i=e<r.length;if(!i||o>=t-1){var s=n.subarray(0,o);if(a.push(String.fromCharCode.apply(null,s)),!i)return a.join("");r=r.subarray(e),e=0,o=0}var u=r[e++];if(128&u){if(192==(224&u)){var f=63&r[e++];n[o++]=(31&u)<<6|f}else if(224==(240&u)){f=63&r[e++];var c=63&r[e++];n[o++]=(31&u)<<12|f<<6|c}else if(240==(248&u)){var l=(7&u)<<18|(f=63&r[e++])<<12|(c=63&r[e++])<<6|63&r[e++];l>65535&&(l-=65536,n[o++]=l>>>10&1023|55296,l=56320|1023&l),n[o++]=l}}else n[o++]=u}}};r="function"==typeof TextDecoder?new TextDecoder:e,q.utf8Decoder=r;var t,n={decode:function(r){var e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2);if(e.length<=4096)return String.fromCharCode.apply(null,e);for(var t=[],n=0,a=0;n<e.length;n+=a)a=Math.min(4096,e.length-n),t.push(String.fromCharCode.apply(null,e.subarray(n,n+a)));return t.join("")}};t="function"==typeof TextDecoder?new TextDecoder("utf-16le"):n,q.utf16Decoder=t},lengthBytesUTF8:function(r){for(var e,t=0,n=0;n<r.length;++n)(e=r.charCodeAt(n))<=127?t++:e<=2047?t+=2:e>=55296&&e<=57343?(t+=4,++n):t+=3;return t},UTF8ToString:function(r,e){if(!r||!e)return"";r>>>=0;var t=new Uint8Array(n.buffer),a=r;if(-1===e)for(;t[a];)++a;else a=r+(e>>>0);if((e=a-r)<=16){for(var o=r,i="";o<a;){var s=t[o++];if(128&s){var u=63&t[o++];if(192!=(224&s)){var f=63&t[o++];if((s=224==(240&s)?(15&s)<<12|u<<6|f:(7&s)<<18|u<<12|f<<6|63&t[o++])<65536)i+=String.fromCharCode(s);else{var c=s-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&s)<<6|u)}else i+=String.fromCharCode(s)}return i}return q.utf8Decoder.decode("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer||"[object SharedArrayBuffer]"===Object.prototype.toString.call(t.buffer)?t.slice(r,a):t.subarray(r,a))},stringToUTF8:function(r,e,t){var a=new Uint8Array(n.buffer),o=e;if(!(t>0))return 0;for(var i=o>>>=0,s=o+t-1,u=0;u<r.length;++u){var f=r.charCodeAt(u);if(f>=55296&&f<=57343)f=65536+((1023&f)<<10)|1023&r.charCodeAt(++u);if(f<=127){if(o>=s)break;a[o++]=f}else if(f<=2047){if(o+1>=s)break;a[o++]=192|f>>6,a[o++]=128|63&f}else if(f<=65535){if(o+2>=s)break;a[o++]=224|f>>12,a[o++]=128|f>>6&63,a[o++]=128|63&f}else{if(o+3>=s)break;a[o++]=240|f>>18,a[o++]=128|f>>12&63,a[o++]=128|f>>6&63,a[o++]=128|63&f}}return a[o]=0,o-i},UTF16ToString:function(r,e){if(!r||!e)return"";var t=r>>>=0;if(-1===e){for(var a=t>>1,o=new Uint16Array(n.buffer);o[a];)++a;t=a<<1}else t=r+2*(e>>>0);if((e=t-r)<=32)return String.fromCharCode.apply(null,new Uint16Array(n.buffer,r,e/2));var i=new Uint8Array(n.buffer);return q.utf16Decoder.decode("function"==typeof SharedArrayBuffer&&i.buffer instanceof SharedArrayBuffer||"[object SharedArrayBuffer]"===Object.prototype.toString.call(i.buffer)?i.slice(r,t):i.subarray(r,t))},stringToUTF16:function(r,e,t){if(void 0===t&&(t=2147483647),t<2)return 0;for(var a=e,o=(t-=2)<2*r.length?t/2:r.length,i=new DataView(n.buffer),s=0;s<o;++s){var u=r.charCodeAt(s);i.setInt16(e,u,!0),e+=2}return i.setInt16(e,0,!0),e-a},newString:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);i.checkGCAccess();var s=-1===t,u=t>>>0;if(0!==t&&!e)return i.setLastError(1);if(!a)return i.setLastError(1);if(!(s||u<=2147483647))return i.setLastError(1);var f=o(e,s,u),c=l.addToCurrentScope(f).id;return new DataView(n.buffer).setUint32(a,c,!0),i.clearLastError()},newExternalString:function(r,e,t,a,o,i,s,u,f){if(!r)return 1;var c=l.envStore.get(r);c.checkGCAccess();var d=-1===t,p=t>>>0;if(0!==t&&!e)return c.setLastError(1);if(!i)return c.setLastError(1);if(!(d||p<=2147483647))return c.setLastError(1);var v=u(r,e,t,i);if(0===v){if(s)new DataView(n.buffer).setInt8(s,1,!0);a&&c.callFinalizer(a,e,o)}return v}};function H(r,e,t,a,o,i,s){if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!e)return u.setLastError(1);var f=l.handleStore.get(e);if(!f.isTypedArray())return u.setLastError(1);var c,d=f.value,p=new DataView(n.buffer);if(t){var v=void 0;if(d instanceof Int8Array)v=0;else if(d instanceof Uint8Array)v=1;else if(d instanceof Uint8ClampedArray)v=2;else if(d instanceof Int16Array)v=3;else if(d instanceof Uint16Array)v=4;else if(d instanceof Int32Array)v=5;else if(d instanceof Uint32Array)v=6;else if("function"==typeof Float16Array&&d instanceof Float16Array)v=11;else if(d instanceof Float32Array)v=7;else if(d instanceof Float64Array)v=8;else if(d instanceof BigInt64Array)v=9;else{if(!(d instanceof BigUint64Array))return u.setLastError(9);v=10}p.setInt32(t,v,!0)}if(a&&p.setUint32(a,d.length,!0),o||i){if(c=d.buffer,o){var h=J.getViewPointer(d,!0).address;p.setUint32(o,h,!0)}if(i){var y=u.ensureHandleId(c);p.setUint32(i,y,!0)}}return s&&p.setUint32(s,d.byteOffset,!0),u.clearLastError()}function Q(r,e,t,a,o,i){if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!e)return s.setLastError(1);var u=l.handleStore.get(e);if(!u.isDataView())return s.setLastError(1);var f,c=u.value,d=new DataView(n.buffer);if(t&&d.setUint32(t,c.byteLength,!0),a||o){if(f=c.buffer,a){var p=J.getViewPointer(c,!0).address;d.setUint32(a,p,!0)}if(o){var v=s.ensureHandleId(f);d.setUint32(o,v,!0)}}return i&&d.setUint32(i,c.byteOffset,!0),s.clearLastError()}var $=Object.freeze({__proto__:null,napi_get_array_length:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if(!o.isArray())return a.setLastError(8);var i=o.value.length>>>0;return new DataView(n.buffer).setUint32(t,i,!0),a.getReturnStatus()}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_get_arraybuffer_info:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!e)return o.setLastError(1);var i=l.handleStore.get(e);if(!i.isArrayBuffer()&&!J.isSharedArrayBuffer(i.value))return o.setLastError(1);var s=new DataView(n.buffer);if(t){var u=J.getArrayBufferPointer(i.value,!0).address;s.setUint32(t,u,!0)}return a&&s.setUint32(a,i.value.byteLength,!0),o.clearLastError()},napi_get_buffer_info:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);var o=l.handleStore.get(e);return o.isBuffer(l.feature.Buffer)?o.isDataView()?Q(r,e,n,t,0,0):H(r,e,0,n,t,0,0):a.setLastError(1)},napi_get_dataview_info:Q,napi_get_date_value:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);var i=l.handleStore.get(e);return i.isDate()?(a=i.value.valueOf(),new DataView(n.buffer).setFloat64(t,a,!0),o.getReturnStatus()):o.setLastError(1)}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_get_prototype:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if(null==o.value)throw new TypeError("Cannot convert undefined or null to object");var i=void 0;try{i=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch(r){return a.setLastError(2)}var s=a.ensureHandleId(Object.getPrototypeOf(i));return new DataView(n.buffer).setUint32(t,s,!0),a.getReturnStatus()}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_get_typedarray_info:H,napi_get_value_bigint_int64:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!l.feature.supportBigInt)return o.setLastError(9);if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(e).value;if("bigint"!=typeof i)return o.setLastError(6);var s=new DataView(n.buffer);i>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&i<BigInt(1)<<BigInt(63)?s.setInt8(a,1,!0):(s.setInt8(a,0,!0),(i&=(BigInt(1)<<BigInt(64))-BigInt(1))>=BigInt(1)<<BigInt(63)&&(i-=BigInt(1)<<BigInt(64)));var u=Number(i&BigInt(4294967295)),f=Number(i>>BigInt(32));return s.setInt32(t,u,!0),s.setInt32(t+4,f,!0),o.clearLastError()},napi_get_value_bigint_uint64:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!l.feature.supportBigInt)return o.setLastError(9);if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(e).value;if("bigint"!=typeof i)return o.setLastError(6);var s=new DataView(n.buffer);i>=BigInt(0)&&i<BigInt(1)<<BigInt(64)?s.setInt8(a,1,!0):(s.setInt8(a,0,!0),i&=(BigInt(1)<<BigInt(64))-BigInt(1));var u=Number(i&BigInt(4294967295)),f=Number(i>>BigInt(32));return s.setUint32(t,u,!0),s.setUint32(t+4,f,!0),o.clearLastError()},napi_get_value_bigint_words:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!l.feature.supportBigInt)return i.setLastError(9);if(!e)return i.setLastError(1);if(!a)return i.setLastError(1);var s=l.handleStore.get(e);if(!s.isBigInt())return i.setLastError(17);for(var u=s.value<BigInt(0),f=new DataView(n.buffer),c=f.getUint32(a,!0),d=0,p=u?s.value*BigInt(-1):s.value;p!==BigInt(0);)d++,p>>=BigInt(64);if(p=u?s.value*BigInt(-1):s.value,t||o){if(!t)return i.setLastError(1);if(!o)return i.setLastError(1);for(var v=[];p!==BigInt(0);){var h=p&(BigInt(1)<<BigInt(64))-BigInt(1);v.push(h),p>>=BigInt(64)}for(var y=Math.min(c,v.length),g=0;g<y;g++){var _=Number(v[g]&BigInt(4294967295)),E=Number(v[g]>>BigInt(32));f.setUint32(o+8*g,_,!0),f.setUint32(o+(8*g+4),E,!0)}f.setInt32(t,u?1:0,!0),f.setUint32(a,y,!0)}else c=d,f.setUint32(a,c,!0);return i.clearLastError()},napi_get_value_bool:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if("boolean"!=typeof o.value)return a.setLastError(7);var i=o.value?1:0;return new DataView(n.buffer).setInt8(t,i,!0),a.clearLastError()},napi_get_value_double:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if("number"!=typeof o.value)return a.setLastError(6);var i=o.value;return new DataView(n.buffer).setFloat64(t,i,!0),a.clearLastError()},napi_get_value_external:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if(!o.isExternal())return a.setLastError(1);var i=o.data();return new DataView(n.buffer).setUint32(t,i,!0),a.clearLastError()},napi_get_value_int32:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if("number"!=typeof o.value)return a.setLastError(6);var i=new Int32Array([o.value])[0];return new DataView(n.buffer).setInt32(t,i,!0),a.clearLastError()},napi_get_value_int64:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if("number"!=typeof o.value)return a.setLastError(6);var i=o.value,s=new DataView(n.buffer);return i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY||isNaN(i)?(s.setInt32(t,0,!0),s.setInt32(t+4,0,!0)):i<-0x8000000000000000?(s.setInt32(t,0,!0),s.setInt32(t+4,2147483648,!0)):i>=0x8000000000000000?(s.setUint32(t,4294967295,!0),s.setUint32(t+4,2147483647,!0)):k(t,Math.trunc(i)),a.clearLastError()},napi_get_value_string_latin1:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!e)return i.setLastError(1);a>>>=0;var s=l.handleStore.get(e);if("string"!=typeof s.value)return i.setLastError(3);var u=new DataView(n.buffer);if(t)if(0!==a){for(var f=0,c=void 0,d=0;d<a-1;++d)c=255&s.value.charCodeAt(d),u.setUint8(t+d,c,!0),f++;u.setUint8(t+f,0,!0),o&&u.setUint32(o,f,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return i.setLastError(1);u.setUint32(o,s.value.length,!0)}return i.clearLastError()},napi_get_value_string_utf16:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!e)return i.setLastError(1);a>>>=0;var s=l.handleStore.get(e);if("string"!=typeof s.value)return i.setLastError(3);var u=new DataView(n.buffer);if(t)if(0!==a){var f=q.stringToUTF16(s.value,t,2*a);o&&u.setUint32(o,f/2,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return i.setLastError(1);u.setUint32(o,s.value.length,!0)}return i.clearLastError()},napi_get_value_string_utf8:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!e)return i.setLastError(1);a>>>=0;var s=l.handleStore.get(e);if("string"!=typeof s.value)return i.setLastError(3);var u=new DataView(n.buffer);if(t)if(0!==a){var f=q.stringToUTF8(s.value,t,a);o&&u.setUint32(o,f,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return i.setLastError(1);var c=q.lengthBytesUTF8(s.value);u.setUint32(o,c,!0)}return i.clearLastError()},napi_get_value_uint32:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e);if("number"!=typeof o.value)return a.setLastError(6);var i=new Uint32Array([o.value])[0];return new DataView(n.buffer).setUint32(t,i,!0),a.clearLastError()},node_api_set_prototype:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=l.handleStore.get(e).value;if(null==a)throw new TypeError("Cannot convert undefined or null to object");var o=typeof a,i=void 0;try{i="object"===o&&null!==a||"function"===o?a:Object(a)}catch(r){return n.setLastError(2)}var s=l.handleStore.get(t).value;return Object.setPrototypeOf(i,s),n.getReturnStatus()}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}}});function Y(r,e,t,a){return q.newString(r,e,t,a,function(r,e,t){var a="",o=0,i=new DataView(n.buffer);if(e)for(;;){if(!(s=i.getUint8(r,!0)))break;a+=String.fromCharCode(s),r++}else for(;o<t;){var s;if(!(s=i.getUint8(r,!0)))break;a+=String.fromCharCode(s),o++,r++}return a})}function X(r,e,t,n){return q.newString(r,e,t,n,function(r){return q.UTF16ToString(r,t)})}function Z(r,e,t,n){return q.newString(r,e,t,n,function(r){return q.UTF8ToString(r,t)})}var K=Object.freeze({__proto__:null,napi_create_bigint_int64:function(r,e,t,a){if(!r)return 1;var o,i=l.envStore.get(r);if(i.checkGCAccess(),!l.feature.supportBigInt)return i.setLastError(9);if(!t)return i.setLastError(1);o=e;var s=l.addToCurrentScope(o).id;return new DataView(n.buffer).setUint32(t,s,!0),i.clearLastError()},napi_create_bigint_uint64:function(r,e,t,a){if(!r)return 1;var o,i=l.envStore.get(r);if(i.checkGCAccess(),!l.feature.supportBigInt)return i.setLastError(9);if(!t)return i.setLastError(1);o=e&(BigInt(1)<<BigInt(64))-BigInt(1);var s=l.addToCurrentScope(o).id;return new DataView(n.buffer).setUint32(t,s,!0),i.clearLastError()},napi_create_bigint_words:function(r,e,t,a,o){var i,s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!l.feature.supportBigInt)return u.setLastError(9);if(!o)return u.setLastError(1);if((t>>>=0)>2147483647)return u.setLastError(1);if(t>16384)throw new RangeError("Maximum BigInt size exceeded");var f=BigInt(0),c=new DataView(n.buffer);for(s=0;s<t;s++){var d=c.getUint32(a+8*s,!0),p=c.getUint32(a+(8*s+4),!0);f+=(BigInt(d)|BigInt(p)<<BigInt(32))<<BigInt(64*s)}return f*=BigInt(e)%BigInt(2)===BigInt(0)?BigInt(1):BigInt(-1),i=l.addToCurrentScope(f).id,c.setUint32(o,i,!0),u.getReturnStatus()}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}},napi_create_double:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);var o=l.addToCurrentScope(e).id;return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_create_int32:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);var o=l.addToCurrentScope(e).id;return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_create_int64:function(r,e,t,a){if(!r)return 1;var o,i=l.envStore.get(r);if(i.checkGCAccess(),!t)return i.setLastError(1);o=Number(e);var s=l.addToCurrentScope(o).id;return new DataView(n.buffer).setUint32(t,s,!0),i.clearLastError()},napi_create_string_latin1:Y,napi_create_string_utf16:X,napi_create_string_utf8:Z,napi_create_uint32:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);var o=l.addToCurrentScope(e>>>0).id;return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},node_api_create_external_string_latin1:function(r,e,t,n,a,o,i){return q.newExternalString(r,e,t,n,a,o,i,Y,void 0)},node_api_create_external_string_utf16:function(r,e,t,n,a,o,i){return q.newExternalString(r,e,t,n,a,o,i,X,void 0)},node_api_create_property_key_latin1:function(r,e,t,n){return Y(r,e,t,n)},node_api_create_property_key_utf16:function(r,e,t,n){return X(r,e,t,n)},node_api_create_property_key_utf8:function(r,e,t,n){return Z(r,e,t,n)}});function rr(r,e,t,n,o){var i,s=e&&t?q.UTF8ToString(e,t):"",u=a.get(n),f=function(r){return u(r.id,r.ctx.scopeStore.currentScope.id)},c=function(r,e){return function(){var t=r.ctx.openScope(r),n=t.callbackInfo;n.data=o,n.args=arguments,n.thiz=this,n.fn=i;try{var a=r.callIntoModule(e);return a?r.ctx.handleStore.get(a).value:void 0}finally{n.data=0,n.args=void 0,n.thiz=void 0,n.fn=void 0,r.ctx.closeScope(r,t)}}};if(""===s)return{status:0,f:i=c(r,f)};if(!/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(s))return{status:1,f:void 0};if(l.feature.supportNewFunction){var d=c(r,f);try{i=new Function("_","return function "+s+'(){"use strict";return _.apply(this,arguments);};')(d)}catch(e){i=c(r,f),l.feature.canSetFunctionName&&Object.defineProperty(i,"name",{value:s})}}else i=c(r,f),l.feature.canSetFunctionName&&Object.defineProperty(i,"name",{value:s});return{status:0,f:i}}function er(r,e,t,n,a,o,i,s,u){if(a||o){var f=void 0,c=void 0;a&&(f=rr(r,0,0,a,u).f),o&&(c=rr(r,0,0,o,u).f);var d={configurable:!!(4&s),enumerable:!!(2&s),get:f,set:c};Object.defineProperty(e,t,d)}else if(n){d={configurable:!!(4&s),enumerable:!!(2&s),writable:!!(1&s),value:rr(r,0,0,n,u).f};Object.defineProperty(e,t,d)}else{d={configurable:!!(4&s),enumerable:!!(2&s),writable:!!(1&s),value:l.handleStore.get(i).value};Object.defineProperty(e,t,d)}}function tr(r){var e=l.handleStore.get(r);return e.isObject()||e.isFunction()?(void 0!==J&&ArrayBuffer.isView(e.value)&&J.wasmMemoryViewTable.has(e.value)&&(e=l.addToCurrentScope(J.wasmMemoryViewTable.get(e.value))),{status:0,handle:e}):{status:1}}function nr(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(1);if(0===a&&!t)return i.setLastError(1);var s=l.handleStore.get(e);if(!s.isObject()&&!s.isFunction())return i.setLastError(1);var u=i.getObjectBinding(s.value),f=u.wrapped,c=l.refStore.get(f);if(!c)return i.setLastError(1);if(t)o=c.data(),new DataView(n.buffer).setUint32(t,o,!0);return 1===a&&(u.wrapped=0,1===c.ownership()?c.resetFinalizer():c.dispose()),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}}function ar(r,e,t,a,o,i){if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!l.feature.supportFinalizer)return s.setLastError(9);if(!e)return s.setLastError(1);if(!a)return s.setLastError(1);var u=tr(e);if(0!==u.status)return s.setLastError(u.status);var f=u.handle,c=i?1:0,d=l.createReferenceWithFinalizer(s,f.id,0,c,a,t,o);if(i){var p=d.id;new DataView(n.buffer).setUint32(i,p,!0)}return s.clearLastError()}var or=Object.freeze({__proto__:null,napi_add_finalizer:ar,napi_check_object_type_tag:function(r,e,t,a){var o=!0;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(i.tryCatch.hasCaught()?10:1);var s=l.handleStore.get(e);if(!s.isObject()&&!s.isFunction())return i.setLastError(i.tryCatch.hasCaught()?10:2);if(!t)return i.setLastError(i.tryCatch.hasCaught()?10:1);if(!a)return i.setLastError(i.tryCatch.hasCaught()?10:1);var u=i.getObjectBinding(s.value);if(null!==u.tag){var f=u.tag,c=new Uint32Array(n.buffer,t,4);o=f[0]===c[0]&&f[1]===c[1]&&f[2]===c[2]&&f[3]===c[3]}else o=!1;return new DataView(n.buffer).setInt8(a,o?1:0,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_define_class:function(r,e,t,a,o,i,s,u){var f,c,d;if(!r)return 1;var p=l.envStore.get(r);if(p.checkGCAccess(),!p.tryCatch.isEmpty())return p.setLastError(10);if(!p.canCallIntoJs())return p.setLastError(p.moduleApiVersion>=10?23:10);p.clearLastError();try{if(!u)return p.setLastError(1);if(!a)return p.setLastError(1);if((i>>>=0)>0&&!s)return p.setLastError(1);if(t<-1||t>2147483647||!e)return p.setLastError(1);var v=rr(p,e,t,a,o);if(0!==v.status)return p.setLastError(v.status);for(var h=v.f,y=void 0,g=new DataView(n.buffer),_=0;_<i;_++){f=s+32*_;var E=g.getUint32(f,!0),w=g.getUint32(f+4,!0),m=g.getUint32(f+8,!0),L=g.getUint32(f+12,!0),b=g.getUint32(f+16,!0),S=g.getUint32(f+20,!0);d=g.getInt32(f+24,!0);var A=g.getUint32(f+28,!0);if(E)y=q.UTF8ToString(E,-1);else{if(!w)return p.setLastError(4);if("string"!=typeof(y=l.handleStore.get(w).value)&&"symbol"!=typeof y)return p.setLastError(4)}1024&d?er(p,h,y,m,L,b,S,d,A):er(p,h.prototype,y,m,L,b,S,d,A)}return c=l.addToCurrentScope(h).id,g.setUint32(u,c,!0),p.getReturnStatus()}catch(r){return p.tryCatch.setError(r),p.setLastError(10)}},napi_remove_wrap:function(r,e,t){return nr(r,e,t,1)},napi_type_tag_object:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!e)return a.setLastError(a.tryCatch.hasCaught()?10:1);var o=l.handleStore.get(e);if(!o.isObject()&&!o.isFunction())return a.setLastError(a.tryCatch.hasCaught()?10:2);if(!t)return a.setLastError(a.tryCatch.hasCaught()?10:1);var i=a.getObjectBinding(o.value);if(null!==i.tag)return a.setLastError(a.tryCatch.hasCaught()?10:1);var s=new Uint8Array(16);return s.set(new Uint8Array(n.buffer,t,16)),i.tag=new Uint32Array(s.buffer),a.getReturnStatus()}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_unwrap:function(r,e,t){return nr(r,e,t,0)},napi_wrap:function(r,e,t,a,o,i){return function(r,e,t,a,o,i){var s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!l.feature.supportFinalizer){if(a)throw l.createNotSupportWeakRefError("napi_wrap",'Parameter "finalize_cb" must be 0(NULL)');if(i)throw l.createNotSupportWeakRefError("napi_wrap",'Parameter "result" must be 0(NULL)')}if(!e)return u.setLastError(1);var f=tr(e);if(0!==f.status)return u.setLastError(f.status);var c=f.handle;if(0!==u.getObjectBinding(c.value).wrapped)return u.setLastError(1);var d=void 0;if(i){if(!a)return u.setLastError(1);s=(d=l.createReferenceWithFinalizer(u,c.id,0,1,a,t,o)).id,new DataView(n.buffer).setUint32(i,s,!0)}else d=a?l.createReferenceWithFinalizer(u,c.id,0,0,a,t,o):l.createReferenceWithData(u,c.id,0,0,t);return u.getObjectBinding(c.value).wrapped=d.id,u.getReturnStatus()}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}}(r,e,t,a,o,i)},node_api_post_finalizer:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);return a.enqueueFinalizer(l.createTrackedFinalizer(a,e,t,n)),a.clearLastError()}});function ir(r,e,t,a,o,i,s){var u;if(!r)return 1;var f=l.envStore.get(r);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!s)return f.setLastError(1);if(a>>>=0,t||(a=0),a>2147483647)throw new RangeError("Cannot create a memory view larger than 2147483647 bytes");if(t+a>n.buffer.byteLength)throw new RangeError("Memory out of range");if(!l.feature.supportFinalizer&&o)throw l.createNotSupportWeakRefError("emnapi_create_memory_view",'Parameter "finalize_cb" must be 0(NULL)');var c=void 0;switch(e){case 0:c={Ctor:Int8Array,address:t,length:a,ownership:1,runtimeAllocated:0};break;case 1:c={Ctor:Uint8Array,address:t,length:a,ownership:1,runtimeAllocated:0};break;case 2:c={Ctor:Uint8ClampedArray,address:t,length:a,ownership:1,runtimeAllocated:0};break;case 3:c={Ctor:Int16Array,address:t,length:a>>1,ownership:1,runtimeAllocated:0};break;case 4:c={Ctor:Uint16Array,address:t,length:a>>1,ownership:1,runtimeAllocated:0};break;case 5:c={Ctor:Int32Array,address:t,length:a>>2,ownership:1,runtimeAllocated:0};break;case 6:c={Ctor:Uint32Array,address:t,length:a>>2,ownership:1,runtimeAllocated:0};break;case 7:c={Ctor:Float32Array,address:t,length:a>>2,ownership:1,runtimeAllocated:0};break;case 8:c={Ctor:Float64Array,address:t,length:a>>3,ownership:1,runtimeAllocated:0};break;case 9:c={Ctor:BigInt64Array,address:t,length:a>>3,ownership:1,runtimeAllocated:0};break;case 10:c={Ctor:BigUint64Array,address:t,length:a>>3,ownership:1,runtimeAllocated:0};break;case-1:c={Ctor:DataView,address:t,length:a,ownership:1,runtimeAllocated:0};break;case 11:if("function"!=typeof Float16Array)return f.setLastError(1);c={Ctor:Float16Array,address:t,length:a>>1,ownership:1,runtimeAllocated:0};break;case-2:if(!l.feature.Buffer)throw l.createNotSupportBufferError("emnapi_create_memory_view","");c={Ctor:l.feature.Buffer,address:t,length:a,ownership:1,runtimeAllocated:0};break;default:return f.setLastError(1)}var d=c.Ctor,p=-2===e?l.feature.Buffer.from(n.buffer,c.address,c.length):new d(n.buffer,c.address,c.length),v=l.addToCurrentScope(p);if(J.wasmMemoryViewTable.set(p,c),o){var h=ar(r,v.id,t,o,i,0);if(10===h){var y=f.tryCatch.extractException();throw f.clearLastError(),y}if(0!==h)return f.setLastError(h)}return u=v.id,new DataView(n.buffer).setUint32(s,u,!0),f.getReturnStatus()}catch(y){return f.tryCatch.setError(y),f.setLastError(10)}}function sr(r,e,t,a){var o;if(t=null!=t?t:0,t>>>=0,e instanceof ArrayBuffer||J.isSharedArrayBuffer(e)){if(!(s=J.getArrayBufferPointer(e,!1).address))throw new Error("Unknown ArrayBuffer address");if("number"==typeof a&&-1!==a||(a=e.byteLength-t),0===(a>>>=0))return e;o=new Uint8Array(e,t,a);var i=new Uint8Array(n.buffer);return r?i.set(o,s):o.set(i.subarray(s,s+a)),e}if(ArrayBuffer.isView(e)){var s,u=J.getViewPointer(e,!1),f=u.view;if(!(s=u.address))throw new Error("Unknown ArrayBuffer address");if("number"==typeof a&&-1!==a||(a=f.byteLength-t),0===(a>>>=0))return f;o=new Uint8Array(f.buffer,f.byteOffset+t,a);i=new Uint8Array(n.buffer);return r?i.set(o,s):o.set(i.subarray(s,s+a)),f}throw new TypeError("emnapiSyncMemory expect ArrayBuffer or ArrayBufferView as first parameter")}function ur(r){var e,t=r instanceof ArrayBuffer,n=r instanceof DataView,a=ArrayBuffer.isView(r)&&!n;if(!(t||a||n||J.isSharedArrayBuffer(r)))throw new TypeError("emnapiGetMemoryAddress expect ArrayBuffer or ArrayBufferView as first parameter");return{address:(e=t?J.getArrayBufferPointer(r,!1):J.getViewPointer(r,!1)).address,ownership:e.ownership,runtimeAllocated:e.runtimeAllocated}}var fr=Object.freeze({__proto__:null,$emnapiGetMemoryAddress:ur,$emnapiSyncMemory:sr,emnapi_create_memory_view:ir,emnapi_get_memory_address:function(r,e,t,a,o){var i,s,u,f;if(!r)return 1;var c=l.envStore.get(r);if(c.checkGCAccess(),!c.tryCatch.isEmpty())return c.setLastError(10);if(!c.canCallIntoJs())return c.setLastError(c.moduleApiVersion>=10?23:10);c.clearLastError();try{if(!e)return c.setLastError(1);if(!t&&!a&&!o)return c.setLastError(1);i=(f=ur(c.ctx.handleStore.get(e).value)).address;var d=new DataView(n.buffer);return t&&d.setUint32(t,i,!0),a&&(u=f.ownership,d.setInt32(a,u,!0)),o&&(s=f.runtimeAllocated,d.setInt8(o,s,!0)),c.getReturnStatus()}catch(r){return c.tryCatch.setError(r),c.setLastError(10)}},emnapi_get_runtime_version:function(r,e){if(!r)return 1;var t,a=l.envStore.get(r);if(!e)return a.setLastError(1);try{t=l.getRuntimeVersions().version}catch(r){return a.setLastError(9)}var o=t.split(".").map(function(r){return Number(r)}),i=new DataView(n.buffer);return i.setUint32(e,o[0],!0),i.setUint32(e+4,o[1],!0),i.setUint32(e+8,o[2],!0),a.clearLastError()},emnapi_is_node_binding_available:function(){return p?1:0},emnapi_is_support_bigint:function(){return l.feature.supportBigInt?1:0},emnapi_is_support_weakref:function(){return l.feature.supportFinalizer?1:0},emnapi_sync_memory:function(r,e,t,a,o){var i;if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!t)return s.setLastError(1);var u=new DataView(n.buffer),f=u.getUint32(t,!0),c=s.ctx.handleStore.get(f);if(!(c.isArrayBuffer()||c.isTypedArray()||c.isDataView()||J.isSharedArrayBuffer(c.value)))return s.setLastError(1);var d=sr(Boolean(e),c.value,a,o);return c.value!==d&&(i=s.ensureHandleId(d),u.setUint32(t,i,!0)),s.getReturnStatus()}catch(r){return s.tryCatch.setError(r),s.setLastError(10)}}});function cr(r,e,t){r>>>=0;var a=t?new SharedArrayBuffer(r):new ArrayBuffer(r);if(e){var o=J.getArrayBufferPointer(a,!0).address;new DataView(n.buffer).setUint32(e,o,!0)}return a}var lr=Object.freeze({__proto__:null,napi_create_array:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=l.addToCurrentScope([]).id;return new DataView(n.buffer).setUint32(e,a,!0),t.clearLastError()},napi_create_array_with_length:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);e>>>=0;var o=l.addToCurrentScope(new Array(e)).id;return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_create_arraybuffer:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);var s=cr(e,t,!1);return o=l.addToCurrentScope(s).id,new DataView(n.buffer).setUint32(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_create_buffer:function(r,e,t,a){var i,s,u;if(!r)return 1;var f=l.envStore.get(r);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!a)return f.setLastError(1);var c=l.feature.Buffer;if(!c)throw l.createNotSupportBufferError("napi_create_buffer","");var d=void 0;e>>>=0;var p=new DataView(n.buffer);if(t&&0!==e){if(!(u=o(e)))throw new Error("Out of memory");new Uint8Array(n.buffer).subarray(u,u+e).fill(0);var v=c.from(n.buffer,u,e),h={Ctor:c,address:u,length:e,ownership:J.registry?0:1,runtimeAllocated:1};J.wasmMemoryViewTable.set(v,h),null===(i=J.registry)||void 0===i||i.register(h,u),s=l.addToCurrentScope(v).id,p.setUint32(a,s,!0),p.setUint32(t,u,!0)}else d=c.alloc(e),s=l.addToCurrentScope(d).id,p.setUint32(a,s,!0);return f.getReturnStatus()}catch(r){return f.tryCatch.setError(r),f.setLastError(10)}},napi_create_buffer_copy:function(r,e,t,a,o){var i;if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!o)return s.setLastError(1);var u=l.feature.Buffer;if(!u)throw l.createNotSupportBufferError("napi_create_buffer_copy","");var f=cr(e,a,!1),c=u.from(f);return c.set(new Uint8Array(n.buffer).subarray(t,t+e)),i=l.addToCurrentScope(c).id,new DataView(n.buffer).setUint32(o,i,!0),s.getReturnStatus()}catch(r){return s.tryCatch.setError(r),s.setLastError(10)}},napi_create_dataview:function(r,e,t,a,o){if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!o)return i.setLastError(1);e>>>=0,a>>>=0;var s=l.handleStore.get(t).value;return s instanceof ArrayBuffer||J.isSharedArrayBuffer(s)?function(r){if(e+a>r.byteLength){var t=new RangeError("byte_offset + byte_length should be less than or equal to the size in bytes of the array passed in");throw t.code="ERR_NAPI_INVALID_DATAVIEW_ARGS",t}var s=new DataView(r,a,e);r===n.buffer&&(J.wasmMemoryViewTable.has(s)||J.wasmMemoryViewTable.set(s,{Ctor:DataView,address:a,length:e,ownership:1,runtimeAllocated:0}));var u=l.addToCurrentScope(s).id;return new DataView(n.buffer).setUint32(o,u,!0),i.getReturnStatus()}(s):i.setLastError(1)}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_create_date:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{return t?(a=l.addToCurrentScope(new Date(e)).id,new DataView(n.buffer).setUint32(t,a,!0),o.getReturnStatus()):o.setLastError(1)}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_create_external:function(r,e,t,a,o){var i;if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!o)return s.setLastError(1);if(!l.feature.supportFinalizer&&t)throw l.createNotSupportWeakRefError("napi_create_external",'Parameter "finalize_cb" must be 0(NULL)');var u=l.getCurrentScope().addExternal(e);return t&&l.createReferenceWithFinalizer(s,u.id,0,0,t,e,a),i=u.id,new DataView(n.buffer).setUint32(o,i,!0),s.clearLastError()}catch(r){return s.tryCatch.setError(r),s.setLastError(10)}},napi_create_external_arraybuffer:function(r,e,t,a,o,i){var s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i)return u.setLastError(1);if(t>>>=0,e||(t=0),e+t>n.buffer.byteLength)throw new RangeError("Memory out of range");if(!l.feature.supportFinalizer&&a)throw l.createNotSupportWeakRefError("napi_create_external_arraybuffer",'Parameter "finalize_cb" must be 0(NULL)');var f=new ArrayBuffer(t);if(0===t)try{(new(0,l.feature.MessageChannel)).port1.postMessage(f,[f])}catch(r){}else new Uint8Array(f).set(new Uint8Array(n.buffer).subarray(e,e+t)),J.table.set(f,{address:e,ownership:1,runtimeAllocated:0});var c=l.addToCurrentScope(f);if(a){var d=ar(r,c.id,e,a,o,0);if(10===d){var p=u.tryCatch.extractException();throw u.clearLastError(),p}if(0!==d)return u.setLastError(d)}return s=c.id,new DataView(n.buffer).setUint32(i,s,!0),u.getReturnStatus()}catch(p){return u.tryCatch.setError(p),u.setLastError(10)}},napi_create_external_buffer:function(r,e,t,n,a,o){return ir(r,-2,t,e,n,a,o)},napi_create_object:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=l.addToCurrentScope({}).id;return new DataView(n.buffer).setUint32(e,a,!0),t.clearLastError()},napi_create_object_with_properties:function(r,e,t,a,o,i){if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!i)return s.setLastError(1);if((o>>>=0)>0){if(!t)return s.setLastError(1);if(!a)return s.setLastError(1)}for(var u,f=e?l.handleStore.get(e).value:null,c={},d=new DataView(n.buffer),p=0;p<o;p++){var v=l.handleStore.get(d.getUint32(t+4*p,!0)).value;if("string"!=typeof v&&"symbol"!=typeof v)return s.setLastError(4);c[v]={value:l.handleStore.get(d.getUint32(a+4*p,!0)).value,writable:!0,enumerable:!0,configurable:!0}}try{u=Object.defineProperties(Object.create(f),c)}catch(r){return s.setLastError(9)}var h=l.addToCurrentScope(u).id;return d.setUint32(i,h,!0),s.clearLastError()},napi_create_symbol:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);var o=new DataView(n.buffer);if(e){var i=l.handleStore.get(e).value;if("string"!=typeof i)return a.setLastError(3);var s=l.addToCurrentScope(Symbol(i)).id;o.setUint32(t,s,!0)}else{var u=l.addToCurrentScope(Symbol()).id;o.setUint32(t,u,!0)}return a.clearLastError()},napi_create_typedarray:function(r,e,t,a,o,i){var s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!a)return u.setLastError(1);if(!i)return u.setLastError(1);var f=l.handleStore.get(a);if(!f.isArrayBuffer())return u.setLastError(1);var c=f.value,d=function(r,e,t,a,o,u){var f,c;if((o>>>=0,u>>>=0,t>1)&&o%t!==0)return(c=new RangeError("start offset of ".concat(null!==(f=e.name)&&void 0!==f?f:""," should be a multiple of ").concat(t))).code="ERR_NAPI_INVALID_TYPEDARRAY_ALIGNMENT",r.tryCatch.setError(c),r.setLastError(9);if(u*t+o>a.byteLength)return(c=new RangeError("Invalid typed array length")).code="ERR_NAPI_INVALID_TYPEDARRAY_LENGTH",r.tryCatch.setError(c),r.setLastError(9);var d=new e(a,o,u);return a===n.buffer&&(J.wasmMemoryViewTable.has(d)||J.wasmMemoryViewTable.set(d,{Ctor:e,address:o,length:u,ownership:1,runtimeAllocated:0})),s=l.addToCurrentScope(d).id,new DataView(n.buffer).setUint32(i,s,!0),r.getReturnStatus()};switch(e){case 0:return d(u,Int8Array,1,c,o,t);case 1:return d(u,Uint8Array,1,c,o,t);case 2:return d(u,Uint8ClampedArray,1,c,o,t);case 3:return d(u,Int16Array,2,c,o,t);case 4:return d(u,Uint16Array,2,c,o,t);case 5:return d(u,Int32Array,4,c,o,t);case 6:return d(u,Uint32Array,4,c,o,t);case 7:return d(u,Float32Array,4,c,o,t);case 8:return d(u,Float64Array,8,c,o,t);case 9:return d(u,BigInt64Array,8,c,o,t);case 10:return d(u,BigUint64Array,8,c,o,t);case 11:return"function"!=typeof Float16Array?u.setLastError(1):d(u,Float16Array,2,c,o,t);default:return u.setLastError(1)}}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}},node_api_create_buffer_from_arraybuffer:function(r,e,t,a,o){var i;if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!e)return s.setLastError(1);if(!o)return s.setLastError(1);t>>>=0,a>>>=0;var u=l.handleStore.get(e);if(!u.isArrayBuffer())return s.setLastError(1);var f=u.value;if(a+t>f.byteLength){var c=new RangeError("The byte offset + length is out of range");throw c.code="ERR_OUT_OF_RANGE",c}var d=l.feature.Buffer;if(!d)throw l.createNotSupportBufferError("node_api_create_buffer_from_arraybuffer","");var p=d.from(f,t,a);return f===n.buffer&&(J.wasmMemoryViewTable.has(p)||J.wasmMemoryViewTable.set(p,{Ctor:d,address:t,length:a,ownership:1,runtimeAllocated:0})),i=l.addToCurrentScope(p).id,new DataView(n.buffer).setUint32(o,i,!0),s.getReturnStatus()}catch(c){return s.tryCatch.setError(c),s.setLastError(10)}},node_api_create_sharedarraybuffer:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);var s=cr(e,t,!0);return o=l.addToCurrentScope(s).id,new DataView(n.buffer).setUint32(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},node_api_symbol_for:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!a)return o.setLastError(1);var i=-1===t,s=t>>>0;if(0!==t&&!e)return o.setLastError(1);if(!(i||s<=2147483647))return o.setLastError(1);var u=q.UTF8ToString(e,t),f=l.addToCurrentScope(Symbol.for(u)).id;return new DataView(n.buffer).setUint32(a,f,!0),o.clearLastError()}});var dr=Object.freeze({__proto__:null,napi_get_boolean:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!t)return a.setLastError(1);var o=0===e?3:4;return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_get_global:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?(new DataView(n.buffer).setUint32(e,5,!0),t.clearLastError()):t.setLastError(1)},napi_get_null:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?(new DataView(n.buffer).setUint32(e,2,!0),t.clearLastError()):t.setLastError(1)},napi_get_undefined:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?(new DataView(n.buffer).setUint32(e,1,!0),t.clearLastError()):t.setLastError(1)}});var pr=Object.freeze({__proto__:null,napi_get_instance_data:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(!e)return t.setLastError(1);var a=t.getInstanceData();return new DataView(n.buffer).setUint32(e,a,!0),t.clearLastError()},napi_set_instance_data:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);return a.setInstanceData(e,t,n),a.clearLastError()}});var vr=Object.freeze({__proto__:null,_emnapi_get_last_error_info:function(r,e,t,a){var o=l.envStore.get(r).lastError,i=o.errorCode,s=o.engineErrorCode>>>0,u=o.engineReserved,f=new DataView(n.buffer);f.setInt32(e,i,!0),f.setUint32(t,s,!0),f.setUint32(a,u,!0)},napi_create_error:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(t).value;if("string"!=typeof i)return o.setLastError(3);var s=new Error(i);if(e){var u=l.handleStore.get(e).value;if("string"!=typeof u)return o.setLastError(3);s.code=u}var f=l.addToCurrentScope(s).id;return new DataView(n.buffer).setUint32(a,f,!0),o.clearLastError()},napi_create_range_error:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(t).value;if("string"!=typeof i)return o.setLastError(3);var s=new RangeError(i);if(e){var u=l.handleStore.get(e).value;if("string"!=typeof u)return o.setLastError(3);s.code=u}var f=l.addToCurrentScope(s).id;return new DataView(n.buffer).setUint32(a,f,!0),o.clearLastError()},napi_create_type_error:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(t).value;if("string"!=typeof i)return o.setLastError(3);var s=new TypeError(i);if(e){var u=l.handleStore.get(e).value;if("string"!=typeof u)return o.setLastError(3);s.code=u}var f=l.addToCurrentScope(s).id;return new DataView(n.buffer).setUint32(a,f,!0),o.clearLastError()},napi_fatal_error:function(r,e,t,n){var a=q.UTF8ToString(r,e),o=q.UTF8ToString(t,n);p?p.napi.fatalError(a,o):c("FATAL ERROR: "+a+" "+o)},napi_fatal_exception:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!e)return t.setLastError(1);var n=t.ctx.handleStore.get(e);try{t.triggerFatalException(n.value)}catch(r){return t.setLastError(9)}return t.clearLastError()}catch(e){return t.tryCatch.setError(e),t.setLastError(10)}},napi_get_and_clear_last_exception:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=new DataView(n.buffer);if(!t.tryCatch.hasCaught())return a.setUint32(e,1,!0),t.clearLastError();var o=t.tryCatch.exception(),i=t.ensureHandleId(o);return a.setUint32(e,i,!0),t.tryCatch.reset(),t.clearLastError()},napi_is_exception_pending:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=t.tryCatch.hasCaught();return new DataView(n.buffer).setInt8(e,a?1:0,!0),t.clearLastError()},napi_throw:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{return e?(t.tryCatch.setError(l.handleStore.get(e).value),t.clearLastError()):t.setLastError(1)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}},napi_throw_error:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new Error(q.UTF8ToString(t,-1));return e&&(a.code=q.UTF8ToString(e,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}},napi_throw_range_error:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new RangeError(q.UTF8ToString(t,-1));return e&&(a.code=q.UTF8ToString(e,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}},napi_throw_type_error:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new TypeError(q.UTF8ToString(t,-1));return e&&(a.code=q.UTF8ToString(e,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}},node_api_create_syntax_error:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(t).value;if("string"!=typeof i)return o.setLastError(3);var s=new SyntaxError(i);if(e){var u=l.handleStore.get(e).value;if("string"!=typeof u)return o.setLastError(3);s.code=u}var f=l.addToCurrentScope(s).id;return new DataView(n.buffer).setUint32(a,f,!0),o.clearLastError()},node_api_throw_syntax_error:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new SyntaxError(q.UTF8ToString(t,-1));return e&&(a.code=q.UTF8ToString(e,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}}});var hr=Object.freeze({__proto__:null,napi_call_function:function(r,e,t,a,o,i){var s,u=0;if(!r)return 1;var f=l.envStore.get(r);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!e)return f.setLastError(1);if((a>>>=0)>0&&!o)return f.setLastError(1);var c=l.handleStore.get(e).value;if(!t)return f.setLastError(1);var d=l.handleStore.get(t).value;if("function"!=typeof d)return f.setLastError(1);for(var p=[],v=new DataView(n.buffer);u<a;u++){var h=v.getUint32(o+4*u,!0);p.push(l.handleStore.get(h).value)}var y=d.apply(c,p);return i&&(s=f.ensureHandleId(y),v.setUint32(i,s,!0)),f.clearLastError()}catch(r){return f.tryCatch.setError(r),f.setLastError(10)}},napi_create_function:function(r,e,t,a,o,i){var s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i)return u.setLastError(1);if(!a)return u.setLastError(1);var f=rr(u,e,t,a,o);if(0!==f.status)return u.setLastError(f.status);var c=f.f;return s=l.addToCurrentScope(c).id,new DataView(n.buffer).setUint32(i,s,!0),u.getReturnStatus()}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}},napi_get_cb_info:function(r,e,t,a,o,i){if(!r)return 1;var s=l.envStore.get(r);if(!e)return s.setLastError(1);var u=l.scopeStore.get(e).callbackInfo,f=new DataView(n.buffer);if(a){if(!t)return s.setLastError(1);for(var c=f.getUint32(t,!0),d=u.args.length,p=c<d?c:d,v=0;v<p;v++){var h=s.ensureHandleId(u.args[v]);f.setUint32(a+4*v,h,!0)}if(v<c)for(;v<c;v++)f.setUint32(a+4*v,1,!0)}if(t&&f.setUint32(t,u.args.length,!0),o){var y=s.ensureHandleId(u.thiz);f.setUint32(o,y,!0)}return i&&f.setUint32(i,u.data,!0),s.clearLastError()},napi_get_new_target:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.scopeStore.get(e).callbackInfo,i=o.thiz,s=o.fn,u=null==i||null==i.constructor?0:i instanceof s?a.ensureHandleId(i.constructor):0;return new DataView(n.buffer).setUint32(t,u,!0),a.clearLastError()},napi_new_instance:function(r,e,t,a,o){var i,s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!e)return u.setLastError(1);if((t>>>=0)>0&&!a)return u.setLastError(1);if(!o)return u.setLastError(1);var f=l.handleStore.get(e).value;if("function"!=typeof f)return u.setLastError(1);var c=void 0,d=new DataView(n.buffer);if(l.feature.supportReflect){var p=Array(t);for(i=0;i<t;i++){var v=d.getUint32(a+4*i,!0);p[i]=l.handleStore.get(v).value}c=Reflect.construct(f,p,f)}else{var h=Array(t+1);for(h[0]=void 0,i=0;i<t;i++){v=d.getUint32(a+4*i,!0);h[i+1]=l.handleStore.get(v).value}c=new(f.bind.apply(f,h))}return o&&(s=u.ensureHandleId(c),d.setUint32(o,s,!0)),u.getReturnStatus()}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}}});var yr=Object.freeze({__proto__:null,_emnapi_env_ref:function(r){l.envStore.get(r).ref()},_emnapi_env_unref:function(r){l.envStore.get(r).unref()},napi_add_env_cleanup_hook:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);return e?(l.addCleanupHook(n,e,t),0):n.setLastError(1)},napi_close_escapable_handle_scope:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?0===t.openHandleScopes?13:(l.closeScope(t),t.clearLastError()):t.setLastError(1)},napi_close_handle_scope:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return t.checkGCAccess(),e?0===t.openHandleScopes?13:(l.closeScope(t),t.clearLastError()):t.setLastError(1)},napi_create_reference:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!e)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.handleStore.get(e);if(o.moduleApiVersion<10&&!(i.isObject()||i.isFunction()||i.isSymbol()))return o.setLastError(1);var s=l.createReference(o,i.id,t>>>0,1);return new DataView(n.buffer).setUint32(a,s.id,!0),o.clearLastError()},napi_delete_reference:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return e?(l.refStore.get(e).dispose(),t.clearLastError()):t.setLastError(1)},napi_escape_handle:function(r,e,t,a){if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!e)return o.setLastError(1);if(!t)return o.setLastError(1);if(!a)return o.setLastError(1);var i=l.scopeStore.get(e);if(!i.escapeCalled()){var s=i.escape(t),u=s?s.id:0;return new DataView(n.buffer).setUint32(a,u,!0),o.clearLastError()}return o.setLastError(12)},napi_get_reference_value:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.refStore.get(e).get(a);return new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_open_escapable_handle_scope:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=l.openScope(t);return new DataView(n.buffer).setUint32(e,a.id,!0),t.clearLastError()},napi_open_handle_scope:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var a=l.openScope(t);return new DataView(n.buffer).setUint32(e,a.id,!0),t.clearLastError()},napi_reference_ref:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);var o=l.refStore.get(e).ref();return t&&new DataView(n.buffer).setUint32(t,o,!0),a.clearLastError()},napi_reference_unref:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);var o=l.refStore.get(e);if(0===o.refcount())return a.setLastError(9);var i=o.unref();return t&&new DataView(n.buffer).setUint32(t,i,!0),a.clearLastError()},napi_remove_env_cleanup_hook:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);return e?(l.removeCleanupHook(n,e,t),0):n.setLastError(1)}});var gr=Object.freeze({__proto__:null,_emnapi_get_filename:function(r,e,t){var n=l.envStore.get(r).filename;return e?q.stringToUTF8(n,e,t):q.lengthBytesUTF8(n)}});var _r=Object.freeze({__proto__:null,napi_create_promise:function(r,e,t){var a,o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(1);if(!t)return i.setLastError(1);var s=new DataView(n.buffer),u=new Promise(function(r,t){var n=l.createDeferred({resolve:r,reject:t});a=n.id,s.setUint32(e,a,!0)});return o=l.addToCurrentScope(u).id,s.setUint32(t,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_is_promise:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isPromise()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_reject_deferred:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{return e&&t?(l.deferredStore.get(e).reject(l.handleStore.get(t).value),n.getReturnStatus()):n.setLastError(1)}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}},napi_resolve_deferred:function(r,e,t){if(!r)return 1;var n=l.envStore.get(r);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{return e&&t?(l.deferredStore.get(e).resolve(l.handleStore.get(t).value),n.getReturnStatus()):n.setLastError(1)}catch(r){return n.tryCatch.setError(r),n.setLastError(10)}}});function Er(r,e,t,a,o,i){var s;if(!r)return 1;var u=l.envStore.get(r);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i)return u.setLastError(1);if(!e)return u.setLastError(1);var f=l.handleStore.get(e);if(null==f.value)throw new TypeError("Cannot convert undefined or null to object");var c=void 0;try{c=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch(r){return u.setLastError(2)}if(0!==t&&1!==t)return u.setLastError(1);if(0!==o&&1!==o)return u.setLastError(1);var d=[],p=void 0,v=void 0,h=void 0,y=!0,g=/^(0|[1-9][0-9]*)$/;do{for(p=Object.getOwnPropertyNames(c),v=Object.getOwnPropertySymbols(c),h=0;h<p.length;h++)d.push({name:g.test(p[h])?Number(p[h]):p[h],desc:Object.getOwnPropertyDescriptor(c,p[h]),own:y});for(h=0;h<v.length;h++)d.push({name:v[h],desc:Object.getOwnPropertyDescriptor(c,v[h]),own:y});if(1===t)break;c=Object.getPrototypeOf(c),y=!1}while(c);var _=[],E=function(r,e,t,n){if(-1===r.indexOf(e))if(0===n)r.push(e);else if(1===n){var a="number"==typeof e?String(e):e;"string"==typeof a&&8&t||r.push(a)}};for(h=0;h<d.length;h++){var w=d[h],m=w.name,L=w.desc;if(0===a)E(_,m,a,o);else{if(8&a&&"string"==typeof m)continue;if(16&a&&"symbol"==typeof m)continue;var b=!0;switch(7&a){case 1:b=Boolean(L.writable);break;case 2:b=Boolean(L.enumerable);break;case 3:b=Boolean(L.writable&&L.enumerable);break;case 4:b=Boolean(L.configurable);break;case 5:b=Boolean(L.configurable&&L.writable);break;case 6:b=Boolean(L.configurable&&L.enumerable);break;case 7:b=Boolean(L.configurable&&L.enumerable&&L.writable)}b&&E(_,m,a,o)}}return s=l.addToCurrentScope(_).id,new DataView(n.buffer).setUint32(i,s,!0),u.getReturnStatus()}catch(r){return u.tryCatch.setError(r),u.setLastError(10)}}var wr=Object.freeze({__proto__:null,napi_define_properties:function(r,e,t,a){var o,i;if(!r)return 1;var s=l.envStore.get(r);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if((t>>>=0)>0&&!a)return s.setLastError(1);if(!e)return s.setLastError(1);var u=l.handleStore.get(e),f=u.value;if(!u.isObject()&&!u.isFunction())return s.setLastError(2);for(var c=void 0,d=new DataView(n.buffer),p=0;p<t;p++){o=a+32*p;var v=d.getUint32(o,!0),h=d.getUint32(o+4,!0),y=d.getUint32(o+8,!0),g=d.getUint32(o+12,!0),_=d.getUint32(o+16,!0),E=d.getUint32(o+20,!0);i=d.getInt32(o+24,!0);var w=d.getUint32(o+28,!0);if(v)c=q.UTF8ToString(v,-1);else{if(!h)return s.setLastError(4);if("string"!=typeof(c=l.handleStore.get(h).value)&&"symbol"!=typeof c)return s.setLastError(4)}er(s,f,c,y,g,_,E,i,w)}return s.getReturnStatus()}catch(r){return s.tryCatch.setError(r),s.setLastError(10)}},napi_delete_element:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(!s.isObject()&&!s.isFunction())return i.setLastError(2);if(l.feature.supportReflect)o=Reflect.deleteProperty(s.value,t>>>0);else try{o=delete s.value[t>>>0]}catch(r){o=!1}if(a)new DataView(n.buffer).setInt8(a,o?1:0,!0);return i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_delete_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(!s.isObject()&&!s.isFunction())return i.setLastError(2);var u=l.handleStore.get(t).value;if(l.feature.supportReflect)o=Reflect.deleteProperty(s.value,u);else try{o=delete s.value[u]}catch(r){o=!1}if(a)new DataView(n.buffer).setInt8(a,o?1:0,!0);return i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_get_all_property_names:Er,napi_get_element:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=i.ensureHandleId(u[t>>>0]),new DataView(n.buffer).setUint32(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_get_named_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);if(!t)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=i.ensureHandleId(u[q.UTF8ToString(t,-1)]),new DataView(n.buffer).setUint32(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_get_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=i.ensureHandleId(u[l.handleStore.get(t).value]),new DataView(n.buffer).setUint32(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_get_property_names:function(r,e,t){return Er(r,e,0,18,1,t)},napi_has_element:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=t>>>0 in u?1:0,new DataView(n.buffer).setInt8(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_has_named_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);if(!t)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=q.UTF8ToString(t,-1)in u,new DataView(n.buffer).setInt8(a,o?1:0,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_has_own_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}var f=l.handleStore.get(t).value;return"string"!=typeof f&&"symbol"!=typeof f?i.setLastError(4):(o=Object.prototype.hasOwnProperty.call(u,l.handleStore.get(t).value),new DataView(n.buffer).setInt8(a,o?1:0,!0),i.getReturnStatus())}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_has_property:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!a)return i.setLastError(1);if(!e)return i.setLastError(1);var s=l.handleStore.get(e);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=s.isObject()||s.isFunction()?s.value:Object(s.value)}catch(r){return i.setLastError(2)}return o=l.handleStore.get(t).value in u?1:0,new DataView(n.buffer).setInt8(a,o,!0),i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_object_freeze:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!e)return t.setLastError(1);var n=l.handleStore.get(e),a=n.value;return n.isObject()||n.isFunction()?(Object.freeze(a),t.getReturnStatus()):t.setLastError(2)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}},napi_object_seal:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!e)return t.setLastError(1);var n=l.handleStore.get(e),a=n.value;return n.isObject()||n.isFunction()?(Object.seal(a),t.getReturnStatus()):t.setLastError(2)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}},napi_set_element:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!n)return a.setLastError(1);if(!e)return a.setLastError(1);var o=l.handleStore.get(e);return o.isObject()||o.isFunction()?(o.value[t>>>0]=l.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(2)}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_set_named_property:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!n)return a.setLastError(1);if(!e)return a.setLastError(1);var o=l.handleStore.get(e);return o.isObject()||o.isFunction()?t?(l.handleStore.get(e).value[q.UTF8ToString(t,-1)]=l.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(1):a.setLastError(2)}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_set_property:function(r,e,t,n){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!t)return a.setLastError(1);if(!n)return a.setLastError(1);if(!e)return a.setLastError(1);var o=l.handleStore.get(e);return o.isObject()||o.isFunction()?(o.value[l.handleStore.get(t).value]=l.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(2)}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}}});var mr=Object.freeze({__proto__:null,napi_run_script:function(r,e,t){var a,o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(1);if(!t)return i.setLastError(1);var s=l.handleStore.get(e);if(!s.isString())return i.setLastError(3);var u=l.handleStore.get(5).value.eval(s.value);o=i.ensureHandleId(u),new DataView(n.buffer).setUint32(t,o,!0),a=i.getReturnStatus()}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}return a}});var Lr=Object.freeze({__proto__:null,napi_coerce_to_bool:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{return e&&t?(a=l.handleStore.get(e).value?4:3,new DataView(n.buffer).setUint32(t,a,!0),o.getReturnStatus()):o.setLastError(1)}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_coerce_to_number:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);var i=l.handleStore.get(e);if(i.isBigInt())throw new TypeError("Cannot convert a BigInt value to a number");return a=l.addToCurrentScope(Number(i.value)).id,new DataView(n.buffer).setUint32(t,a,!0),o.getReturnStatus()}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_coerce_to_object:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);var i=l.handleStore.get(e);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");return a=o.ensureHandleId(Object(i.value)),new DataView(n.buffer).setUint32(t,a,!0),o.getReturnStatus()}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_coerce_to_string:function(r,e,t){var a;if(!r)return 1;var o=l.envStore.get(r);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!e)return o.setLastError(1);if(!t)return o.setLastError(1);var i=l.handleStore.get(e);if(i.isSymbol())throw new TypeError("Cannot convert a Symbol value to a string");return a=l.addToCurrentScope(String(i.value)).id,new DataView(n.buffer).setUint32(t,a,!0),o.getReturnStatus()}catch(r){return o.tryCatch.setError(r),o.setLastError(10)}},napi_detach_arraybuffer:function(r,e){if(!r)return 1;var t=l.envStore.get(r);if(t.checkGCAccess(),!e)return t.setLastError(1);var n=l.handleStore.get(e).value;if(!(n instanceof ArrayBuffer))return"function"==typeof SharedArrayBuffer&&n instanceof SharedArrayBuffer?t.setLastError(20):t.setLastError(19);try{(new(0,l.feature.MessageChannel)).port1.postMessage(n,[n])}catch(r){return t.setLastError(9)}return t.clearLastError()},napi_instanceof:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!e)return i.setLastError(1);if(!a)return i.setLastError(1);if(!t)return i.setLastError(1);var s=new DataView(n.buffer);s.setInt8(a,0,!0);var u=l.handleStore.get(t);return u.isFunction()?(o=l.handleStore.get(e).value instanceof u.value?1:0,s.setInt8(a,o,!0),i.getReturnStatus()):i.setLastError(5)}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_is_array:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isArray()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_arraybuffer:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isArrayBuffer()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_buffer:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isBuffer(l.feature.Buffer)?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_dataview:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isDataView()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_date:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isDate()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_detached_arraybuffer:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(a.moduleApiVersion>=10?23:10);a.clearLastError();try{if(!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e),i=new DataView(n.buffer);if(o.isArrayBuffer()&&0===o.value.byteLength)try{new Uint8Array(o.value)}catch(r){return i.setInt8(t,1,!0),a.getReturnStatus()}return i.setInt8(t,0,!0),a.getReturnStatus()}catch(r){return a.tryCatch.setError(r),a.setLastError(10)}},napi_is_error:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).value instanceof Error?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_is_typedarray:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e).isTypedArray()?1:0;return new DataView(n.buffer).setInt8(t,o,!0),a.clearLastError()},napi_strict_equals:function(r,e,t,a){var o;if(!r)return 1;var i=l.envStore.get(r);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{return e&&(t&&a)?(o=l.handleStore.get(e).value===l.handleStore.get(t).value?1:0,new DataView(n.buffer).setInt8(a,o,!0),i.getReturnStatus()):i.setLastError(1)}catch(r){return i.tryCatch.setError(r),i.setLastError(10)}},napi_typeof:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o,i=l.handleStore.get(e);if(i.isNumber())o=3;else if(i.isBigInt())o=9;else if(i.isString())o=4;else if(i.isFunction())o=7;else if(i.isExternal())o=8;else if(i.isObject())o=6;else if(i.isBoolean())o=2;else if(i.isUndefined())o=0;else if(i.isSymbol())o=5;else{if(!i.isNull())return a.setLastError(1);o=1}return new DataView(n.buffer).setInt32(t,o,!0),a.clearLastError()},node_api_is_sharedarraybuffer:function(r,e,t){if(!r)return 1;var a=l.envStore.get(r);if(a.checkGCAccess(),!e)return a.setLastError(1);if(!t)return a.setLastError(1);var o=l.handleStore.get(e),i="function"==typeof SharedArrayBuffer&&o.value instanceof SharedArrayBuffer||"[object SharedArrayBuffer]"===Object.prototype.toString.call(o.value)?1:0;return new DataView(n.buffer).setInt8(t,i,!0),a.clearLastError()}});var br=Object.freeze({__proto__:null,napi_get_version:function(r,e){if(!r)return 1;var t=l.envStore.get(r);return e?(new DataView(n.buffer).setUint32(e,10,!0),t.clearLastError()):t.setLastError(1)}});function Sr(r){for(var e=Object.keys(r),t=0;t<e.length;++t){var n=e[t];0!==n.indexOf("$")&&(0===n.indexOf("emnapi_")?h.imports.emnapi[n]=r[n]:0===n.indexOf("_emnapi_")||"napi_set_last_error"===n||"napi_clear_last_error"===n?h.imports.env[n]=r[n]:h.imports.napi[n]=r[n])}}return x.init(),J.init(),q.init(),O.init(),S.init(),h.emnapi.syncMemory=sr,h.emnapi.getMemoryAddress=ur,Sr(B),Sr(D),Sr(N),Sr(T),Sr($),Sr(K),Sr(lr),Sr(dr),Sr(or),Sr(pr),Sr(fr),Sr(vr),Sr(hr),Sr(yr),Sr(gr),Sr(j),Sr(_r),Sr(wr),Sr(mr),Sr(Lr),Sr(br),h.imports.napi.napi_create_threadsafe_function=function(r,e,t,a,s,u,f,c,d,p,v){if(!r)return 1;var h=l.envStore.get(r);if(h.checkGCAccess(),!a)return h.setLastError(1);if(s>>>=0,0===(u>>>=0))return h.setLastError(1);if(!v)return h.setLastError(1);var y,g=0;if(e){if("function"!=typeof l.handleStore.get(e).value)return h.setLastError(1);g=l.createReference(h,e,1,1).id}else if(!p)return h.setLastError(1);if(t){if(null==(y=l.handleStore.get(t).value))return h.setLastError(2);y=Object(y)}else y={};var _=h.ensureHandleId(y),E=l.handleStore.get(a).value;if("symbol"==typeof E)return h.setLastError(3);E=String(E);var w=h.ensureHandleId(E),m=O.offset.end,L=o(m);if(!L)return h.setLastError(9);new Uint8Array(n.buffer).subarray(L,L+m).fill(0);var b=l.createReference(h,_,1,1),S=b.id,A=new DataView(n.buffer);return A.setUint32(L,S,!0),O.initQueue(L)?(M(_,w,-1,L+O.offset.async_id),A.setUint32(L+O.offset.thread_count,u,!0),A.setUint32(L+O.offset.context,d,!0),A.setUint32(L+O.offset.max_queue_size,s,!0),A.setUint32(L+O.offset.ref,g,!0),A.setUint32(L+O.offset.env,r,!0),A.setUint32(L+O.offset.finalize_data,f,!0),A.setUint32(L+O.offset.finalize_cb,c,!0),A.setUint32(L+O.offset.call_js_cb,p,!0),l.addCleanupHook(h,O.cleanup,L),h.ref(),l.increaseWaitingRequestCounter(),A.setInt32(L+O.offset.async_ref,1,!0),A.setUint32(v,L,!0),h.clearLastError()):(i(L),b.dispose(),h.setLastError(9))},h.imports.napi.napi_get_threadsafe_function_context=function(r,e){if(!r||!e)return c(),1;var t=O.getContext(r);return new DataView(n.buffer).setUint32(e,t,!0),0},h.imports.napi.napi_call_threadsafe_function=function(r,e,t){return r?O.push(r,e,t):(c(),1)},h.imports.napi.napi_acquire_threadsafe_function=function(r){return r?O.getMutex(r).execute(function(){return O.getIsClosing(r)?16:(O.addThreadCount(r),0)}):(c(),1)},h.imports.napi.napi_release_threadsafe_function=function(r,e){if(!r)return c(),1;var t=O.getMutex(r),n=O.getCond(r);return t.execute(function(){if(0===O.getThreadCount(r))return 1;if((O.subThreadCount(r),0===O.getThreadCount(r)||1===e)&&!O.getIsClosing(r)){var t=1===e?1:0;O.setIsClosing(r,t),t&&O.getMaxQueueSize(r)>0&&n.signal(),O.send(r)}return 0})},h.imports.napi.napi_unref_threadsafe_function=function(r,e){if(!e)return c(),1;var t=e+O.offset.async_ref>>2,a=new Int32Array(n.buffer);return Atomics.load(a,t)&&(Atomics.store(a,t,0),l.decreaseWaitingRequestCounter()),0},h.imports.napi.napi_ref_threadsafe_function=function(r,e){if(!e)return c(),1;var t=e+O.offset.async_ref>>2,a=new Int32Array(n.buffer);return Atomics.load(a,t)||(Atomics.store(a,t,1),l.increaseWaitingRequestCounter()),0},h}();return t}function m(r,e,t,n){var a,o=(n=null!=n?n:{}).getMemory,i=n.getTable,s=n.beforeInit;if(null!=o&&"function"!=typeof o)throw new TypeError("options.getMemory is not a function");if(null!=i&&"function"!=typeof i)throw new TypeError("options.getTable is not a function");if(null!=s&&"function"!=typeof s)throw new TypeError("options.beforeInit is not a function");var u="object"==typeof e&&null!==e;if(u){if(e.loaded)throw new Error("napiModule has already loaded");a=e}else a=w(n);var f,c=n.wasi,l={env:a.imports.env,napi:a.imports.napi,emnapi:a.imports.emnapi};c&&(f=new y(a.childThread?{wasi:c,childThread:!0,postMessage:a.postMessage}:{wasi:c,threadManager:a.PThread,waitThreadStart:a.waitThreadStart}),Object.assign(l,"function"==typeof c.getImportObject?c.getImportObject():{wasi_snapshot_preview1:c.wasiImport}),Object.assign(l,f.getImportObject()));var d=n.overwriteImports;if("function"==typeof d){var p=d(l);"object"==typeof p&&null!==p&&(l=p)}return r(t,l,function(e,t){if(e)throw e;var n=t.instance,d=n,p=n.exports,v="memory"in p,h="memory"in l.env,y=o?o(p):v?p.memory:h?l.env.memory:void 0;if(!y)throw new Error("memory is neither exported nor imported");var g=i?i(p):p.__indirect_function_table;if(c&&!v){var _=Object.create(null);Object.assign(_,p,{memory:y}),d={exports:_}}var E=t.module;c?d=f.initialize(d,E,y):a.PThread.setup(E,y);var w=function(){s&&s({instance:n,module:E}),a.init({instance:d,module:E,memory:y,table:g});var r={instance:n,module:E,usedInstance:d};return u||(r.napiModule=a),r};if(a.PThread.shouldPreloadWorkers()){var m=a.PThread.loadWasmModuleToAllWorkers();if(r===L)return m.then(w);throw new Error("Synchronous loading is not supported with worker pool (reuseWorker.size > 0)")}return w()})}function L(r,e,t){return n(r,e).then(function(r){return t(null,r)},function(r){return t(r)})}function b(r,n,a){var o;try{o=function(r,n){if(!r)throw new TypeError("Invalid wasm source");var a;if(t(n),n=null!=n?n:{},r instanceof ArrayBuffer||ArrayBuffer.isView(r))a=new e.Module(r);else{if(!(r instanceof WebAssembly.Module))throw new TypeError("Invalid wasm source");a=r}return{instance:new e.Instance(a,n),module:a}}(r,n)}catch(r){return a(r)}return a(null,o)}var S=function(r,e){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])},S(r,e)};var A=function(){return A=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},A.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var C=function(r){function e(e){var t=this;if("function"!=typeof e.onLoad)throw new TypeError("options.onLoad is not a function");var n=e.onError;return(t=r.call(this,A(A({},e),{onError:function(r,e){var a,o=null===(a=t.instance)||void 0===a?void 0:a.exports.emnapi_thread_crashed;if("function"==typeof o&&o(),"function"!=typeof n)throw r;n(r,e)}}))||this).napiModule=void 0,t}return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=r}S(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,r),e.prototype.instantiate=function(r){var e=this,t=this.onLoad(r);return"function"==typeof t.then?t.then(function(r){return e.napiModule=r.napiModule,r}):(this.napiModule=t.napiModule,t)},e.prototype.handle=function(e){var t,n=this;if(r.prototype.handle.call(this,e),null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.__emnapi__){var a=e.data.__emnapi__.type,o=e.data.__emnapi__.payload;try{"async-worker-init"===a?this.handleAfterLoad(e,function(){n.napiModule.initWorker(o.arg)}):"async-work-execute"===a&&this.handleAfterLoad(e,function(){n.napiModule.executeAsyncWork(o.work)})}catch(r){this.onError(r,a)}}},e}(_);r.MessageHandler=C,r.ThreadManager=d,r.ThreadMessageHandler=_,r.WASIThreads=y,r.createInstanceProxy=v,r.createNapiModule=w,r.instantiateNapiModule=function(r,e){return m(L,void 0,r,e)},r.instantiateNapiModuleSync=function(r,e){return m(b,void 0,r,e)},r.isSharedArrayBuffer=s,r.isTrapError=u,r.loadNapiModule=function(r,e,t){if("object"!=typeof r||null===r)throw new TypeError("Invalid napiModule");return m(L,r,e,t)},r.loadNapiModuleSync=function(r,e,t){if("object"!=typeof r||null===r)throw new TypeError("Invalid napiModule");return m(b,r,e,t)},r.version="1.8.1"});
