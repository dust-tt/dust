{"code":"import { slugify } from \"./string_utils\";\nexport function makeStructuredDataTableName(name, externalId) {\n    const lowercasedExternalId = externalId.toLowerCase();\n    const externalIdPrefix = lowercasedExternalId.substring(0, 4);\n    const externalIdSuffix = lowercasedExternalId.slice(-4);\n    return slugify(`${name}_${externalIdPrefix}_${externalIdSuffix}`);\n}\nexport function getSanitizedHeaders(rawHeaders) {\n    return rawHeaders.reduce((acc, curr) => {\n        const slugifiedName = slugify(curr);\n        if (!acc.includes(slugifiedName)) {\n            acc.push(slugifiedName);\n        }\n        else {\n            let conflictResolved = false;\n            for (let i = 2; i < 64; i++) {\n                if (!acc.includes(slugify(`${slugifiedName}_${i}`))) {\n                    acc.push(slugify(`${slugifiedName}_${i}`));\n                    conflictResolved = true;\n                    break;\n                }\n            }\n            if (!conflictResolved) {\n                throw new Error(`Failed to generate unique slugified name for header \"${curr}\" after multiple attempts.`);\n            }\n        }\n        return acc;\n    }, []);\n}\n//# sourceMappingURL=structured_data.js.map","references":["/Users/edouardwautier/Projects/dust/types/src/shared/utils/string_utils.ts"],"map":"{\"version\":3,\"file\":\"structured_data.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/shared/utils/structured_data.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AAEzC,MAAM,UAAU,2BAA2B,CAAC,IAAY,EAAE,UAAkB;IAC1E,MAAM,oBAAoB,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;IACtD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9D,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACxD,OAAO,OAAO,CAAC,GAAG,IAAI,IAAI,gBAAgB,IAAI,gBAAgB,EAAE,CAAC,CAAC;AACpE,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,UAAoB;IACtD,OAAO,UAAU,CAAC,MAAM,CAAW,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;QAC/C,MAAM,aAAa,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;QAEpC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;YAChC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACzB;aAAM;YACL,IAAI,gBAAgB,GAAG,KAAK,CAAC;YAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;gBAC3B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,aAAa,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE;oBACnD,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,aAAa,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC3C,gBAAgB,GAAG,IAAI,CAAC;oBACxB,MAAM;iBACP;aACF;YAED,IAAI,CAAC,gBAAgB,EAAE;gBACrB,MAAM,IAAI,KAAK,CACb,wDAAwD,IAAI,4BAA4B,CACzF,CAAC;aACH;SACF;QACD,OAAO,GAAG,CAAC;IACb,CAAC,EAAE,EAAE,CAAC,CAAC;AACT,CAAC\"}"}
