{"code":"/**\n * Data Source configuration\n */\nimport { ioTsEnum } from \"../../../shared/utils/iots_utils\";\nexport const TIME_FRAME_UNITS = [\n    \"hour\",\n    \"day\",\n    \"week\",\n    \"month\",\n    \"year\",\n];\nexport const TimeframeUnitCodec = ioTsEnum(TIME_FRAME_UNITS);\nexport function isTimeFrame(arg) {\n    return (arg.duration !== undefined &&\n        arg.unit !== undefined);\n}\nexport function isTemplatedQuery(arg) {\n    return arg.template !== undefined;\n}\nexport function isRetrievalConfiguration(arg) {\n    return arg !== null && arg.type && arg.type === \"retrieval_configuration\";\n}\nexport function isRetrievalActionType(arg) {\n    return arg.type === \"retrieval_action\";\n}\n//# sourceMappingURL=retrieval.js.map","references":["/Users/edouardwautier/Projects/dust/types/src/shared/model_id.ts","/Users/edouardwautier/Projects/dust/types/src/shared/utils/iots_utils.ts","/Users/edouardwautier/Projects/dust/types/src/front/assistant/agent.ts","/Users/edouardwautier/Projects/dust/types/src/front/assistant/conversation.ts"],"map":"{\"version\":3,\"file\":\"retrieval.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/front/assistant/actions/retrieval.ts\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;AAIH,OAAO,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAC;AAI5D,MAAM,CAAC,MAAM,gBAAgB,GAAG;IAC9B,MAAM;IACN,KAAK;IACL,MAAM;IACN,OAAO;IACP,MAAM;CACE,CAAC;AAEX,MAAM,CAAC,MAAM,kBAAkB,GAAG,QAAQ,CAAgB,gBAAgB,CAAC,CAAC;AAM5E,MAAM,UAAU,WAAW,CAAC,GAAuB;IACjD,OAAO,CACJ,GAAiB,CAAC,QAAQ,KAAK,SAAS;QACxC,GAAiB,CAAC,IAAI,KAAK,SAAS,CACtC,CAAC;AACJ,CAAC;AAoBD,MAAM,UAAU,gBAAgB,CAAC,GAAmB;IAClD,OAAQ,GAAsB,CAAC,QAAQ,KAAK,SAAS,CAAC;AACxD,CAAC;AA0BD,MAAM,UAAU,wBAAwB,CACtC,GAAwC;IAExC,OAAO,GAAG,KAAK,IAAI,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,KAAK,yBAAyB,CAAC;AAC5E,CAAC;AAuBD,MAAM,UAAU,qBAAqB,CACnC,GAAoB;IAEpB,OAAO,GAAG,CAAC,IAAI,KAAK,kBAAkB,CAAC;AACzC,CAAC\"}","dtsmap":{"name":"/Users/edouardwautier/Projects/dust/types/node_modules/.cache/rollup-plugin-typescript2/placeholder/front/assistant/actions/retrieval.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"retrieval.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/front/assistant/actions/retrieval.ts\"],\"names\":[],\"mappings\":\"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\"}"},"dts":{"name":"/Users/edouardwautier/Projects/dust/types/node_modules/.cache/rollup-plugin-typescript2/placeholder/front/assistant/actions/retrieval.d.ts","writeByteOrderMark":false,"text":"/**\n * Data Source configuration\n */\nimport { ModelId } from \"../../../shared/model_id\";\nimport { AgentActionConfigurationType } from \"../../../front/assistant/agent\";\nimport { AgentActionType } from \"../../../front/assistant/conversation\";\nexport declare const TIME_FRAME_UNITS: readonly [\"hour\", \"day\", \"week\", \"month\", \"year\"];\nexport type TimeframeUnit = (typeof TIME_FRAME_UNITS)[number];\nexport declare const TimeframeUnitCodec: import(\"io-ts\").Type<\"hour\" | \"day\" | \"week\" | \"month\" | \"year\", \"hour\" | \"day\" | \"week\" | \"month\" | \"year\", unknown>;\nexport type TimeFrame = {\n    duration: number;\n    unit: TimeframeUnit;\n};\nexport declare function isTimeFrame(arg: RetrievalTimeframe): arg is TimeFrame;\nexport type DataSourceFilter = {\n    tags: {\n        in: string[];\n        not: string[];\n    } | null;\n    parents: {\n        in: string[];\n        not: string[];\n    } | null;\n};\nexport type DataSourceConfiguration = {\n    workspaceId: string;\n    dataSourceId: string;\n    filter: DataSourceFilter;\n};\n/**\n * Retrieval configuration\n */\nexport type TemplatedQuery = {\n    template: string;\n};\nexport declare function isTemplatedQuery(arg: RetrievalQuery): arg is TemplatedQuery;\nexport type RetrievalQuery = \"auto\" | \"none\" | TemplatedQuery;\nexport type RetrievalTimeframe = \"auto\" | \"none\" | TimeFrame;\nexport type RetrievalConfigurationType = {\n    id: ModelId;\n    sId: string;\n    type: \"retrieval_configuration\";\n    dataSources: DataSourceConfiguration[];\n    query: RetrievalQuery;\n    relativeTimeFrame: RetrievalTimeframe;\n    topK: number | \"auto\";\n};\nexport declare function isRetrievalConfiguration(arg: AgentActionConfigurationType | null): arg is RetrievalConfigurationType;\n/**\n * Retrieval action\n */\nexport type RetrievalDocumentType = {\n    id: ModelId;\n    dataSourceWorkspaceId: string;\n    dataSourceId: string;\n    sourceUrl: string | null;\n    documentId: string;\n    reference: string;\n    timestamp: number;\n    tags: string[];\n    score: number | null;\n    chunks: {\n        text: string;\n        offset: number;\n        score: number | null;\n    }[];\n};\nexport declare function isRetrievalActionType(arg: AgentActionType): arg is RetrievalActionType;\nexport type RetrievalActionType = {\n    id: ModelId;\n    type: \"retrieval_action\";\n    params: {\n        relativeTimeFrame: TimeFrame | null;\n        query: string | null;\n        topK: number;\n    };\n    documents: RetrievalDocumentType[] | null;\n};\n//# sourceMappingURL=retrieval.d.ts.map"}}
